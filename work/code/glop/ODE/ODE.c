/*
 * This file was generated automatically by xsubpp version 1.9508 from the
 * contents of ODE.xs. Do not edit this file, edit ODE.xs instead.
 *
 *	ANY CHANGES MADE HERE WILL BE LOST!
 *
 */

#line 1 "ODE.xs"
/* This is almost an XS file.  Lines that begin and end with %% are 
 * expanded using odexs2xs.pl. 
 */

#include "EXTERN.h"
#include "perl.h"
#include "XSUB.h"

#include "ppport.h"

#include <math.h>
#include "ode/ode.h"

#include "const-c.inc"

typedef double* dV;
typedef double* dQ;

typedef dContactGeom* ContactGeom;

typedef dBodyID  dBodyID_NEW;
typedef dJointID dJointID_NEW;
typedef dGeomID  dGeomID_NEW;
typedef dSpaceID dSpaceID_NEW;

#define COLLIDE_BUFSIZE 64
#define INFINITESIMAL 1.0e-10

static const char* _joint_find_type(dJointID joint)
{
    const char* type;
    switch (dJointGetType(joint)) {
    case dJointTypeBall: 
        type = "ODE::Joint::Ball";
        break;
    case dJointTypeHinge:
        type = "ODE::Joint::Hinge";
        break;
    case dJointTypeSlider:
        type = "ODE::Joint::Slider";
        break;
    case dJointTypeContact:
        type = "ODE::Joint::Contact";
        break;
    case dJointTypeUniversal:
        type = "ODE::Joint::Universal";
        break;
    case dJointTypeHinge2:
        type = "ODE::Joint::DoubleHinge";
        break;
    case dJointTypeFixed:
        type = "ODE::Joint::Fixed";
        break;
    case dJointTypeAMotor:
        type = "ODE::Joint::AngularMotor";
        break;
    case dJointTypePlane2D:
        type = "ODE::Joint::Plane2D";
        break;
    default:
        type = "ODE::Joint";
    }

    return type;    
}

static const char* _geom_find_type(dGeomID geom)
{
    const char* type;
    switch (dGeomGetClass(geom)) {
    case dSphereClass:
        type = "ODE::Geom::Sphere";
        break;
    case dBoxClass:
        type = "ODE::Geom::Box";
        break;
    case dCCylinderClass:
        type = "ODE::Geom::CappedCylinder";
        break;
    case dCylinderClass:
        type = "ODE::Geom::Cylinder";
        break;
    case dPlaneClass:
        type = "ODE::Geom::Plane";
        break;
    case dGeomTransformClass:
        type = "ODE::Geom::Transform";
        break;
    case dRayClass:
        type = "ODE::Geom::Ray";
        break;
    case dTriMeshClass:
        type = "ODE::Geom::TriMesh";
        break;
    case dSimpleSpaceClass:
        type = "ODE::Geom::Space::Simple";
        break;
    case dHashSpaceClass:
        type = "ODE::Geom::Space::Hash";
        break;
    case dQuadTreeSpaceClass:
        type = "ODE::Geom::Space::QuadTree";
        break;
    default:
        type = "ODE::Geom";
        break;
    }
    return type;
}

static SV* _get_body_sv(dBodyID body)
{
    return sv_bless(newRV_inc((SV*)dBodyGetData(body)), gv_stashpv("ODE::Body", 1));
}

static SV* _get_joint_sv(dJointID joint)
{
    return sv_bless(newRV_inc((SV*)dJointGetData(joint)), gv_stashpv(_joint_find_type(joint), 1));
}

static SV* _get_geom_sv(dGeomID geom)
{
    return sv_bless(newRV_inc((SV*)dGeomGetData(geom)), gv_stashpv(_geom_find_type(geom), 1));
}

static void _near_callback(void* data, dGeomID o1, dGeomID o2)
{
    SV* code = (SV*)data;
    
    dSP;

    ENTER;
    SAVETMPS;
    
    PUSHMARK(SP);
    EXTEND(SP, 2);
    
    PUSHs(_get_geom_sv(o1));
    PUSHs(_get_geom_sv(o2));
    
    PUTBACK;

    call_sv(code, G_VOID);

    FREETMPS;
    LEAVE;
}

static void _body_dec_refcounts(dBodyID body)
{
    int i;
    int joints = dBodyGetNumJoints(body);

    for (i = 0; i < joints; i++) {
        SV* sv = _get_joint_sv(dBodyGetJoint(body, i));
        if (SvROK(sv) && SvIV(SvRV(sv))) {
            SvREFCNT_dec(sv);
        }
    }
}

#line 172 "ODE.c"

/* INCLUDE:  Including 'const-xs.inc' from 'ODE.xs' */

XS(XS_ODE_constant); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE_constant)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::constant(sv)");
    SP -= items;
    {
#line 4 "const-xs.inc"
#ifdef dXSTARG
	dXSTARG; /* Faster if we have it.  */
#else
	dTARGET;
#endif
	STRLEN		len;
        int		type;
	IV		iv;
	/* NV		nv;	Uncomment this if you need to return NVs */
	/* const char	*pv;	Uncomment this if you need to return PVs */
#line 195 "ODE.c"
	SV *	sv = ST(0);
	const char *	s = SvPV(sv, len);
#line 18 "const-xs.inc"
        /* Change this to constant(aTHX_ s, len, &iv, &nv);
           if you need to return both NVs and IVs */
	type = constant(aTHX_ s, len, &iv);
      /* Return 1 or 2 items. First is error message, or undef if no error.
           Second, if present, is found value */
        switch (type) {
        case PERL_constant_NOTFOUND:
          sv = sv_2mortal(newSVpvf("%s is not a valid ODE macro", s));
          PUSHs(sv);
          break;
        case PERL_constant_NOTDEF:
          sv = sv_2mortal(newSVpvf(
	    "Your vendor has not defined ODE macro %s, used", s));
          PUSHs(sv);
          break;
        case PERL_constant_ISIV:
          EXTEND(SP, 1);
          PUSHs(&PL_sv_undef);
          PUSHi(iv);
          break;
	/* Uncomment this if you need to return NOs
        case PERL_constant_ISNO:
          EXTEND(SP, 1);
          PUSHs(&PL_sv_undef);
          PUSHs(&PL_sv_no);
          break; */
	/* Uncomment this if you need to return NVs
        case PERL_constant_ISNV:
          EXTEND(SP, 1);
          PUSHs(&PL_sv_undef);
          PUSHn(nv);
          break; */
	/* Uncomment this if you need to return PVs
        case PERL_constant_ISPV:
          EXTEND(SP, 1);
          PUSHs(&PL_sv_undef);
          PUSHp(pv, strlen(pv));
          break; */
	/* Uncomment this if you need to return PVNs
        case PERL_constant_ISPVN:
          EXTEND(SP, 1);
          PUSHs(&PL_sv_undef);
          PUSHp(pv, iv);
          break; */
	/* Uncomment this if you need to return SVs
        case PERL_constant_ISSV:
          EXTEND(SP, 1);
          PUSHs(&PL_sv_undef);
          PUSHs(sv);
          break; */
	/* Uncomment this if you need to return UNDEFs
        case PERL_constant_ISUNDEF:
          break; */
	/* Uncomment this if you need to return UVs
        case PERL_constant_ISUV:
          EXTEND(SP, 1);
          PUSHs(&PL_sv_undef);
          PUSHu((UV)iv);
          break; */
	/* Uncomment this if you need to return YESs
        case PERL_constant_ISYES:
          EXTEND(SP, 1);
          PUSHs(&PL_sv_undef);
          PUSHs(&PL_sv_yes);
          break; */
        default:
          sv = sv_2mortal(newSVpvf(
	    "Unexpected return type %d while processing ODE macro %s, used",
               type, s));
          PUSHs(sv);
        }
#line 270 "ODE.c"
	PUTBACK;
	return;
    }
}


/* INCLUDE: Returning to 'ODE.xs' from 'const-xs.inc' */

XS(XS_ODE__close_ode); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__close_ode)
{
    dXSARGS;
    if (items != 0)
	Perl_croak(aTHX_ "Usage: ODE::_close_ode()");
    {
#line 170 "ODE.xs"
        dCloseODE();
#line 288 "ODE.c"
    }
    XSRETURN_EMPTY;
}

XS(XS_ODE__World__make); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__World__make)
{
    dXSARGS;
    if (items != 0)
	Perl_croak(aTHX_ "Usage: ODE::World::_make()");
    {
	dWorldID	RETVAL;
#line 176 "ODE.xs"
        RETVAL = dWorldCreate();
#line 303 "ODE.c"
	ST(0) = sv_newmortal();
        if (RETVAL) {
            sv_setref_pv(ST(0), "ODE::World", (void*)RETVAL);
        }
    }
    XSRETURN(1);
}

XS(XS_ODE__World__destroy); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__World__destroy)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::World::_destroy(id)");
    {
	dWorldID        id = SvROK(ST(0))
            ? (dWorldID) SvIV(SvRV(ST(0))) : NULL;
#line 183 "ODE.xs"
        dWorldDestroy(id);
#line 323 "ODE.c"
    }
    XSRETURN_EMPTY;
}

XS(XS_ODE__World_gravity); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__World_gravity)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::World::gravity(inv, vec = NO_INIT)");
    {
	dWorldID        inv = SvROK(ST(0))
            ? (dWorldID) SvIV(SvRV(ST(0))) : NULL;
	dV	vec;
#line 189 "ODE.xs"
        dVector3 result;
#line 340 "ODE.c"
	dV	RETVAL;

	if (items >= 2) {
	if (sv_isa(ST(1), "ODE::Vector")) {
	    vec = (dV)SvPV_nolen(SvRV(ST(1)));
	}
	else {
	    Perl_croak(aTHX_ "vec is not of type dV");
	};
	}
#line 191 "ODE.xs"
        if (items == 2) {
            dWorldSetGravity(inv, vec[0], vec[1], vec[2]);
            RETVAL = vec;
        }
        else {
            dWorldGetGravity(inv, result);
            RETVAL = result;
        }
#line 360 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Vector", (void*)RETVAL, sizeof(dVector3));
    }
    XSRETURN(1);
}

XS(XS_ODE__World_ERP); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__World_ERP)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::World::ERP(world, erp = NO_INIT)");
    {
	dWorldID        world = SvROK(ST(0))
            ? (dWorldID) SvIV(SvRV(ST(0))) : NULL;
	double	erp;
	double	RETVAL;
	dXSTARG;

	if (items >= 2) {
	    erp = (double)SvNV(ST(1));
	}
#line 206 "ODE.xs"
        if (items == 2) {
            dWorldSetERP(world, erp);
            RETVAL = erp;
        }
        else {
            RETVAL = dWorldGetERP(world);
        }
#line 391 "ODE.c"
	XSprePUSH; PUSHn((double)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__World_CFM); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__World_CFM)
{
    dXSARGS;
    if (items != 2)
	Perl_croak(aTHX_ "Usage: ODE::World::CFM(world, cfm)");
    {
	dWorldID        world = SvROK(ST(0))
            ? (dWorldID) SvIV(SvRV(ST(0))) : NULL;
	double	cfm = (double)SvNV(ST(1));
	double	RETVAL;
	dXSTARG;
#line 220 "ODE.xs"
        if (items == 2) {
            dWorldSetCFM(world, cfm);
            RETVAL = cfm;
        }
        else {
            RETVAL = dWorldGetCFM(world);
        }
#line 417 "ODE.c"
	XSprePUSH; PUSHn((double)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__World_step); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__World_step)
{
    dXSARGS;
    if (items != 2)
	Perl_croak(aTHX_ "Usage: ODE::World::step(world, step)");
    {
	dWorldID        world = SvROK(ST(0))
            ? (dWorldID) SvIV(SvRV(ST(0))) : NULL;
	double	step = (double)SvNV(ST(1));
#line 234 "ODE.xs"
        dWorldStep(world, step);
#line 435 "ODE.c"
    }
    XSRETURN_EMPTY;
}

XS(XS_ODE__World_quickstep); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__World_quickstep)
{
    dXSARGS;
    if (items != 2)
	Perl_croak(aTHX_ "Usage: ODE::World::quickstep(world, step)");
    {
	dWorldID        world = SvROK(ST(0))
            ? (dWorldID) SvIV(SvRV(ST(0))) : NULL;
	double	step = (double)SvNV(ST(1));
#line 240 "ODE.xs"
        dWorldQuickStep(world, step);
#line 452 "ODE.c"
    }
    XSRETURN_EMPTY;
}

XS(XS_ODE__World_new_body); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__World_new_body)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::World::new_body(world)");
    {
	dWorldID        world = SvROK(ST(0))
            ? (dWorldID) SvIV(SvRV(ST(0))) : NULL;
	dBodyID_NEW	RETVAL;
#line 245 "ODE.xs"
        RETVAL = dBodyCreate(world);
#line 469 "ODE.c"
	ST(0) = sv_newmortal();
        if (RETVAL) {
            dBodySetData(RETVAL, (void*)newSViv((IV)RETVAL));
            ST(0) = _get_body_sv(RETVAL);
        }
    }
    XSRETURN(1);
}

XS(XS_ODE__Body_destroy); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Body_destroy)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Body::destroy(bodysv)");
    {
	SV*	bodysv = ST(0);
#line 254 "ODE.xs"
        dBodyID body;
        HV* stash;
#line 490 "ODE.c"
#line 257 "ODE.xs"
        body = SvROK(bodysv) ? (dBodyID)SvIV(SvRV(bodysv)) : NULL;
        _body_dec_refcounts(body);
        if (body) {
            dBodyDestroy(body);
        }
        stash = gv_stashpv("ODE::Null", 1);
        sv_bless(bodysv, stash);  /* Rebless into Null so that we don't get segfaults */
#line 499 "ODE.c"
    }
    XSRETURN_EMPTY;
}

XS(XS_ODE__Body_position); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Body_position)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Body::position(inv, vec = NO_INIT)");
    {
	dBodyID        inv = SvROK(ST(0))
            ? (dBodyID) SvIV(SvRV(ST(0))) : NULL;
	dV	vec;
	dV	RETVAL;

	if (items >= 2) {
	if (sv_isa(ST(1), "ODE::Vector")) {
	    vec = (dV)SvPV_nolen(SvRV(ST(1)));
	}
	else {
	    Perl_croak(aTHX_ "vec is not of type dV");
	};
	}
#line 269 "ODE.xs"
        if (items == 2) {
            dBodySetPosition(inv, vec[0], vec[1], vec[2]);
            RETVAL = vec;
        }
        else {
            RETVAL = (dV)dBodyGetPosition(inv);
        }
#line 532 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Vector", (void*)RETVAL, sizeof(dVector3));
    }
    XSRETURN(1);
}

XS(XS_ODE__Body_rotation); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Body_rotation)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Body::rotation(body, q = NO_INIT)");
    {
	dBodyID        body = SvROK(ST(0))
            ? (dBodyID) SvIV(SvRV(ST(0))) : NULL;
	dQ	q;
	dQ	RETVAL;

	if (items >= 2) {
	if (sv_isa(ST(1), "ODE::Quaternion")) {
	    q = (dQ)SvPV_nolen(SvRV(ST(1)));
	}
	else {
	    Perl_croak(aTHX_ "q is not of type dQ");
	};
	}
#line 283 "ODE.xs"
        if (items == 2) {
            dBodySetQuaternion(body, q);
            RETVAL = q;
        }
        else {
            RETVAL = (dQ)dBodyGetQuaternion(body);
        }
#line 567 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Quaternion", (void*)RETVAL, sizeof(dQuaternion));
    }
    XSRETURN(1);
}

XS(XS_ODE__Body_velocity); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Body_velocity)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Body::velocity(inv, vec = NO_INIT)");
    {
	dBodyID        inv = SvROK(ST(0))
            ? (dBodyID) SvIV(SvRV(ST(0))) : NULL;
	dV	vec;
	dV	RETVAL;

	if (items >= 2) {
	if (sv_isa(ST(1), "ODE::Vector")) {
	    vec = (dV)SvPV_nolen(SvRV(ST(1)));
	}
	else {
	    Perl_croak(aTHX_ "vec is not of type dV");
	};
	}
#line 297 "ODE.xs"
        if (items == 2) {
            dBodySetLinearVel(inv, vec[0], vec[1], vec[2]);
            RETVAL = vec;
        }
        else {
            RETVAL = (dV)dBodyGetLinearVel(inv);
        }
#line 602 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Vector", (void*)RETVAL, sizeof(dVector3));
    }
    XSRETURN(1);
}

XS(XS_ODE__Body_angular_velocity); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Body_angular_velocity)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Body::angular_velocity(inv, vec = NO_INIT)");
    {
	dBodyID        inv = SvROK(ST(0))
            ? (dBodyID) SvIV(SvRV(ST(0))) : NULL;
	dV	vec;
	dV	RETVAL;

	if (items >= 2) {
	if (sv_isa(ST(1), "ODE::Vector")) {
	    vec = (dV)SvPV_nolen(SvRV(ST(1)));
	}
	else {
	    Perl_croak(aTHX_ "vec is not of type dV");
	};
	}
#line 311 "ODE.xs"
        if (items == 2) {
            dBodySetAngularVel(inv, vec[0], vec[1], vec[2]);
            RETVAL = vec;
        }
        else {
            RETVAL = (dV)dBodyGetAngularVel(inv);
        }
#line 637 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Vector", (void*)RETVAL, sizeof(dVector3));
    }
    XSRETURN(1);
}

XS(XS_ODE__Body_mass); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Body_mass)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Body::mass(body, in = NO_INIT)");
    {
	dBodyID        body = SvROK(ST(0))
            ? (dBodyID) SvIV(SvRV(ST(0))) : NULL;
	dMass*	in;
#line 325 "ODE.xs"
        dMass mass;
#line 656 "ODE.c"
	dMass *	RETVAL;

	if (items >= 2) {
	if (sv_isa(ST(1), "ODE::Mass")) {
	    in = (dMass *)SvPV_nolen(SvRV(ST(1)));
	}
	else {
	    Perl_croak(aTHX_ "in is not of type dMassPtr");
	};
	}
#line 327 "ODE.xs"
        if (items == 2) {
            dBodySetMass(body, in);
            RETVAL = in;
        }
        else {
            dBodyGetMass(body, &mass);
            RETVAL = &mass;
        }
#line 676 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Mass", (void*)RETVAL, sizeof(dMass));
    }
    XSRETURN(1);
}

XS(XS_ODE__Body_add_force); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Body_add_force)
{
    dXSARGS;
    if (items < 2 || items > 3)
	Perl_croak(aTHX_ "Usage: ODE::Body::add_force(body, force, at = NO_INIT)");
    {
	dBodyID        body = SvROK(ST(0))
            ? (dBodyID) SvIV(SvRV(ST(0))) : NULL;
	dV	force;
	dV	at;

        if (sv_isa(ST(1), "ODE::Vector")) {
            force = (dV)SvPV_nolen(SvRV(ST(1)));
        }
        else {
            Perl_croak(aTHX_ "force is not of type dV");
        };

	if (items >= 3) {
	if (sv_isa(ST(2), "ODE::Vector")) {
	    at = (dV)SvPV_nolen(SvRV(ST(2)));
	}
	else {
	    Perl_croak(aTHX_ "at is not of type dV");
	};
	}
#line 343 "ODE.xs"
        if (items == 3) {
            dBodyAddForceAtPos(body, force[0], force[1], force[2],
                                     at[0],    at[1],    at[2]);
        }
        else {
            dBodyAddForce(body, force[0], force[1], force[2]);
        }
#line 718 "ODE.c"
    }
    XSRETURN_EMPTY;
}

XS(XS_ODE__Body_add_torque); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Body_add_torque)
{
    dXSARGS;
    if (items != 2)
	Perl_croak(aTHX_ "Usage: ODE::Body::add_torque(body, torque)");
    {
	dBodyID        body = SvROK(ST(0))
            ? (dBodyID) SvIV(SvRV(ST(0))) : NULL;
	dV	torque;

        if (sv_isa(ST(1), "ODE::Vector")) {
            torque = (dV)SvPV_nolen(SvRV(ST(1)));
        }
        else {
            Perl_croak(aTHX_ "torque is not of type dV");
        };
#line 355 "ODE.xs"
        dBodyAddTorque(body, torque[0], torque[1], torque[2]);
#line 742 "ODE.c"
    }
    XSRETURN_EMPTY;
}

XS(XS_ODE__Body_force_accumulator); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Body_force_accumulator)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Body::force_accumulator(inv, vec = NO_INIT)");
    {
	dBodyID        inv = SvROK(ST(0))
            ? (dBodyID) SvIV(SvRV(ST(0))) : NULL;
	dV	vec;
	dV	RETVAL;

	if (items >= 2) {
	if (sv_isa(ST(1), "ODE::Vector")) {
	    vec = (dV)SvPV_nolen(SvRV(ST(1)));
	}
	else {
	    Perl_croak(aTHX_ "vec is not of type dV");
	};
	}
#line 363 "ODE.xs"
        if (items == 2) {
            dBodySetForce(inv, vec[0], vec[1], vec[2]);
            RETVAL = vec;
        }
        else {
            RETVAL = (dV)dBodyGetForce(inv);
        }
#line 775 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Vector", (void*)RETVAL, sizeof(dVector3));
    }
    XSRETURN(1);
}

XS(XS_ODE__Body_torque_accumulator); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Body_torque_accumulator)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Body::torque_accumulator(inv, vec = NO_INIT)");
    {
	dBodyID        inv = SvROK(ST(0))
            ? (dBodyID) SvIV(SvRV(ST(0))) : NULL;
	dV	vec;
	dV	RETVAL;

	if (items >= 2) {
	if (sv_isa(ST(1), "ODE::Vector")) {
	    vec = (dV)SvPV_nolen(SvRV(ST(1)));
	}
	else {
	    Perl_croak(aTHX_ "vec is not of type dV");
	};
	}
#line 377 "ODE.xs"
        if (items == 2) {
            dBodySetTorque(inv, vec[0], vec[1], vec[2]);
            RETVAL = vec;
        }
        else {
            RETVAL = (dV)dBodyGetTorque(inv);
        }
#line 810 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Vector", (void*)RETVAL, sizeof(dVector3));
    }
    XSRETURN(1);
}

XS(XS_ODE__Body_enabled); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Body_enabled)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Body::enabled(body, in = NO_INIT)");
    {
	dBodyID        body = SvROK(ST(0))
            ? (dBodyID) SvIV(SvRV(ST(0))) : NULL;
	int	in;
	int	RETVAL;
	dXSTARG;

	if (items >= 2) {
	    in = (int)SvIV(ST(1));
	}
#line 393 "ODE.xs"
        if (items == 2) {
            if (in)
                dBodyEnable(body);
            else
                dBodyDisable(body);
            RETVAL = in;
        }
        else {
            RETVAL = dBodyIsEnabled(body);
        }
#line 844 "ODE.c"
	XSprePUSH; PUSHi((IV)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Body_finite_rotation_mode); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Body_finite_rotation_mode)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Body::finite_rotation_mode(body, in = NO_INIT)");
    {
	dBodyID        body = SvROK(ST(0))
            ? (dBodyID) SvIV(SvRV(ST(0))) : NULL;
	int	in;
	int	RETVAL;
	dXSTARG;

	if (items >= 2) {
	    in = (int)SvIV(ST(1));
	}
#line 410 "ODE.xs"
        if (items == 2) {
            dBodySetFiniteRotationMode(body, RETVAL = !!in);
        }
        else {
            RETVAL = dBodyGetFiniteRotationMode(body);
        }
#line 873 "ODE.c"
	XSprePUSH; PUSHi((IV)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Body_joints); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Body_joints)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Body::joints(body)");
    SP -= items;
    {
	dBodyID        body = SvROK(ST(0))
            ? (dBodyID) SvIV(SvRV(ST(0))) : NULL;
#line 422 "ODE.xs"
        int njoints, i;
#line 891 "ODE.c"
#line 424 "ODE.xs"
        njoints = dBodyGetNumJoints(body);
        EXTEND(SP, njoints);
        for (i = 0; i < njoints; i++) {
            PUSHs(_get_joint_sv(dBodyGetJoint(body, i)));
        }
#line 898 "ODE.c"
	PUTBACK;
	return;
    }
}

XS(XS_ODE__Body_gravity_mode); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Body_gravity_mode)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Body::gravity_mode(body, in = NO_INIT)");
    {
	dBodyID        body = SvROK(ST(0))
            ? (dBodyID) SvIV(SvRV(ST(0))) : NULL;
	int	in;
	int	RETVAL;
	dXSTARG;

	if (items >= 2) {
	    in = (int)SvIV(ST(1));
	}
#line 434 "ODE.xs"
        if (items == 2) {
            dBodySetGravityMode(body, in);
            RETVAL = !!in;
        }
        else {
            RETVAL = dBodyGetGravityMode(body);
        }
#line 928 "ODE.c"
	XSprePUSH; PUSHi((IV)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__JointGroup__make); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__JointGroup__make)
{
    dXSARGS;
    if (items != 0)
	Perl_croak(aTHX_ "Usage: ODE::JointGroup::_make()");
    {
	dJointGroupID	RETVAL;
#line 448 "ODE.xs"
        RETVAL = dJointGroupCreate(0);
#line 944 "ODE.c"
	ST(0) = sv_newmortal();
        if (RETVAL) {
            sv_setref_pv(ST(0), "ODE::JointGroup", (void*)RETVAL);
        }
    }
    XSRETURN(1);
}

XS(XS_ODE__JointGroup_empty); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__JointGroup_empty)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::JointGroup::empty(group)");
    {
	dJointGroupID        group = SvROK(ST(0))
            ? (dJointGroupID) SvIV(SvRV(ST(0))) : NULL;
#line 455 "ODE.xs"
        dJointGroupEmpty(group);
#line 964 "ODE.c"
    }
    XSRETURN_EMPTY;
}

XS(XS_ODE__JointGroup__destroy); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__JointGroup__destroy)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::JointGroup::_destroy(group)");
    {
	dJointGroupID        group = SvROK(ST(0))
            ? (dJointGroupID) SvIV(SvRV(ST(0))) : NULL;
#line 460 "ODE.xs"
        dJointGroupDestroy(group);
#line 980 "ODE.c"
    }
    XSRETURN_EMPTY;
}

XS(XS_ODE__Joint_destroy); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint_destroy)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Joint::destroy(jointsv)");
    {
	SV*	jointsv = ST(0);
#line 467 "ODE.xs"
        dJointID joint;
        HV* stash;
#line 996 "ODE.c"
#line 470 "ODE.xs"
        joint = SvROK(jointsv) ? (dJointID)SvIV(SvRV(jointsv)) : NULL;

        if (dJointGetBody(joint, 0)) {
            SvREFCNT_dec(jointsv);
        }
        if (dJointGetBody(joint, 1)) {
            SvREFCNT_dec(jointsv);
        }

        dJointDestroy(joint);
        stash = gv_stashpv("ODE::Null", 1);
        sv_bless(jointsv, stash);
#line 1010 "ODE.c"
    }
    XSRETURN_EMPTY;
}

XS(XS_ODE__Joint__destroy); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__destroy)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Joint::_destroy(joint)");
    {
	dJointID        joint = SvROK(ST(0))
            ? (dJointID) SvIV(SvRV(ST(0))) : NULL;
#line 486 "ODE.xs"
        dJointDestroy(joint);
#line 1026 "ODE.c"
    }
    XSRETURN_EMPTY;
}

XS(XS_ODE__Joint_attach); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint_attach)
{
    dXSARGS;
    if (items != 3)
	Perl_croak(aTHX_ "Usage: ODE::Joint::attach(jointsv, bodya, bodyb)");
    {
	SV*	jointsv = ST(0);
	dBodyID        bodya = SvROK(ST(1))
            ? (dBodyID) SvIV(SvRV(ST(1))) : NULL;
	dBodyID        bodyb = SvROK(ST(2))
            ? (dBodyID) SvIV(SvRV(ST(2))) : NULL;
#line 493 "ODE.xs"
        dJointID joint;
#line 1045 "ODE.c"
#line 495 "ODE.xs"
        joint = SvROK(jointsv) ? (dJointID)SvIV(SvRV(jointsv)) : NULL;
        dJointAttach(joint, bodya, bodyb);
        if (bodya) {
            SvREFCNT_inc(jointsv);
        }
        if (bodyb) {
            SvREFCNT_inc(jointsv);
        }
#line 1055 "ODE.c"
    }
    XSRETURN_EMPTY;
}

XS(XS_ODE__Joint__Ball__make); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__Ball__make)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Joint::Ball::_make(world, group = NULL)");
    {
	dWorldID        world = SvROK(ST(0))
            ? (dWorldID) SvIV(SvRV(ST(0))) : NULL;
	dJointGroupID	group;
	dJointID_NEW	RETVAL;

	if (items < 2)
	    group = NULL;
	else {
	group = SvROK(ST(1))
	    ? (dJointGroupID) SvIV(SvRV(ST(1))) : NULL;
	}
#line 515 "ODE.xs"
        RETVAL = dJointCreateBall(world, group);
#line 1080 "ODE.c"
	ST(0) = sv_newmortal();
        if (RETVAL) {
            dJointSetData(RETVAL, (void*)newSViv((IV)RETVAL));
            ST(0) = _get_joint_sv(RETVAL);
        }
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__Ball_anchor); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__Ball_anchor)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Joint::Ball::anchor(inv, vec = NO_INIT)");
    {
	dJointID        inv = SvROK(ST(0))
            ? (dJointID) SvIV(SvRV(ST(0))) : NULL;
	dV	vec;
#line 523 "ODE.xs"
        dVector3 result;
#line 1102 "ODE.c"
	dV	RETVAL;

	if (items >= 2) {
	if (sv_isa(ST(1), "ODE::Vector")) {
	    vec = (dV)SvPV_nolen(SvRV(ST(1)));
	}
	else {
	    Perl_croak(aTHX_ "vec is not of type dV");
	};
	}
#line 525 "ODE.xs"
        if (items == 2) {
            dJointSetBallAnchor(inv, vec[0], vec[1], vec[2]);
            RETVAL = vec;
        }
        else {
            dJointGetBallAnchor(inv, result);
            RETVAL = result;
        }
#line 1122 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Vector", (void*)RETVAL, sizeof(dVector3));
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__Hinge__make); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__Hinge__make)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Joint::Hinge::_make(world, group = NULL)");
    {
	dWorldID        world = SvROK(ST(0))
            ? (dWorldID) SvIV(SvRV(ST(0))) : NULL;
	dJointGroupID	group;
	dJointID_NEW	RETVAL;

	if (items < 2)
	    group = NULL;
	else {
	group = SvROK(ST(1))
	    ? (dJointGroupID) SvIV(SvRV(ST(1))) : NULL;
	}
#line 543 "ODE.xs"
        RETVAL = dJointCreateHinge(world, group);
#line 1149 "ODE.c"
	ST(0) = sv_newmortal();
        if (RETVAL) {
            dJointSetData(RETVAL, (void*)newSViv((IV)RETVAL));
            ST(0) = _get_joint_sv(RETVAL);
        }
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__Hinge_anchor); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__Hinge_anchor)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Joint::Hinge::anchor(inv, vec = NO_INIT)");
    {
	dJointID        inv = SvROK(ST(0))
            ? (dJointID) SvIV(SvRV(ST(0))) : NULL;
	dV	vec;
#line 551 "ODE.xs"
        dVector3 result;
#line 1171 "ODE.c"
	dV	RETVAL;

	if (items >= 2) {
	if (sv_isa(ST(1), "ODE::Vector")) {
	    vec = (dV)SvPV_nolen(SvRV(ST(1)));
	}
	else {
	    Perl_croak(aTHX_ "vec is not of type dV");
	};
	}
#line 553 "ODE.xs"
        if (items == 2) {
            dJointSetHingeAnchor(inv, vec[0], vec[1], vec[2]);
            RETVAL = vec;
        }
        else {
            dJointGetHingeAnchor(inv, result);
            RETVAL = result;
        }
#line 1191 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Vector", (void*)RETVAL, sizeof(dVector3));
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__Hinge_axis); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__Hinge_axis)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Joint::Hinge::axis(inv, vec = NO_INIT)");
    {
	dJointID        inv = SvROK(ST(0))
            ? (dJointID) SvIV(SvRV(ST(0))) : NULL;
	dV	vec;
#line 568 "ODE.xs"
        dVector3 result;
#line 1210 "ODE.c"
	dV	RETVAL;

	if (items >= 2) {
	if (sv_isa(ST(1), "ODE::Vector")) {
	    vec = (dV)SvPV_nolen(SvRV(ST(1)));
	}
	else {
	    Perl_croak(aTHX_ "vec is not of type dV");
	};
	}
#line 570 "ODE.xs"
        if (items == 2) {
            dJointSetHingeAxis(inv, vec[0], vec[1], vec[2]);
            RETVAL = vec;
        }
        else {
            dJointGetHingeAxis(inv, result);
            RETVAL = result;
        }
#line 1230 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Vector", (void*)RETVAL, sizeof(dVector3));
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__Hinge_angle); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__Hinge_angle)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Joint::Hinge::angle(joint)");
    {
	dJointID        joint = SvROK(ST(0))
            ? (dJointID) SvIV(SvRV(ST(0))) : NULL;
	double	RETVAL;
	dXSTARG;
#line 584 "ODE.xs"
        RETVAL = dJointGetHingeAngle(joint);
#line 1250 "ODE.c"
	XSprePUSH; PUSHn((double)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__Hinge_angle_rate); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__Hinge_angle_rate)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Joint::Hinge::angle_rate(joint)");
    {
	dJointID        joint = SvROK(ST(0))
            ? (dJointID) SvIV(SvRV(ST(0))) : NULL;
	double	RETVAL;
	dXSTARG;
#line 591 "ODE.xs"
        RETVAL = dJointGetHingeAngleRate(joint);
#line 1269 "ODE.c"
	XSprePUSH; PUSHn((double)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__Hinge__param); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__Hinge__param)
{
    dXSARGS;
    if (items < 2 || items > 3)
	Perl_croak(aTHX_ "Usage: ODE::Joint::Hinge::_param(joint, parameter, value = NO_INIT)");
    {
	dJointID        joint = SvROK(ST(0))
            ? (dJointID) SvIV(SvRV(ST(0))) : NULL;
	int	parameter = (int)SvIV(ST(1));
	double	value;
	double	RETVAL;
	dXSTARG;

	if (items >= 3) {
	    value = (double)SvNV(ST(2));
	}
#line 600 "ODE.xs"
        if (items == 3) {
            dJointSetHingeParam(joint, parameter, value);
            RETVAL = value;
        }
        else {
            RETVAL = dJointGetHingeParam(joint, parameter);
        }
#line 1300 "ODE.c"
	XSprePUSH; PUSHn((double)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__Slider__make); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__Slider__make)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Joint::Slider::_make(world, group = NULL)");
    {
	dWorldID        world = SvROK(ST(0))
            ? (dWorldID) SvIV(SvRV(ST(0))) : NULL;
	dJointGroupID	group;
	dJointID_NEW	RETVAL;

	if (items < 2)
	    group = NULL;
	else {
	group = SvROK(ST(1))
	    ? (dJointGroupID) SvIV(SvRV(ST(1))) : NULL;
	}
#line 616 "ODE.xs"
        RETVAL = dJointCreateSlider(world, group);
#line 1326 "ODE.c"
	ST(0) = sv_newmortal();
        if (RETVAL) {
            dJointSetData(RETVAL, (void*)newSViv((IV)RETVAL));
            ST(0) = _get_joint_sv(RETVAL);
        }
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__Slider_axis); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__Slider_axis)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Joint::Slider::axis(inv, vec = NO_INIT)");
    {
	dJointID        inv = SvROK(ST(0))
            ? (dJointID) SvIV(SvRV(ST(0))) : NULL;
	dV	vec;
#line 624 "ODE.xs"
        dVector3 result;
#line 1348 "ODE.c"
	dV	RETVAL;

	if (items >= 2) {
	if (sv_isa(ST(1), "ODE::Vector")) {
	    vec = (dV)SvPV_nolen(SvRV(ST(1)));
	}
	else {
	    Perl_croak(aTHX_ "vec is not of type dV");
	};
	}
#line 626 "ODE.xs"
        if (items == 2) {
            dJointSetSliderAxis(inv, vec[0], vec[1], vec[2]);
            RETVAL = vec;
        }
        else {
            dJointGetSliderAxis(inv, result);
            RETVAL = result;
        }
#line 1368 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Vector", (void*)RETVAL, sizeof(dVector3));
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__Slider_extension); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__Slider_extension)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Joint::Slider::extension(joint)");
    {
	dJointID        joint = SvROK(ST(0))
            ? (dJointID) SvIV(SvRV(ST(0))) : NULL;
	double	RETVAL;
	dXSTARG;
#line 640 "ODE.xs"
        RETVAL = dJointGetSliderPosition(joint);
#line 1388 "ODE.c"
	XSprePUSH; PUSHn((double)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__Slider_extension_rate); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__Slider_extension_rate)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Joint::Slider::extension_rate(joint)");
    {
	dJointID        joint = SvROK(ST(0))
            ? (dJointID) SvIV(SvRV(ST(0))) : NULL;
	double	RETVAL;
	dXSTARG;
#line 647 "ODE.xs"
        RETVAL = dJointGetSliderPositionRate(joint);
#line 1407 "ODE.c"
	XSprePUSH; PUSHn((double)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__Slider__param); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__Slider__param)
{
    dXSARGS;
    if (items < 2 || items > 3)
	Perl_croak(aTHX_ "Usage: ODE::Joint::Slider::_param(joint, parameter, value = NO_INIT)");
    {
	dJointID        joint = SvROK(ST(0))
            ? (dJointID) SvIV(SvRV(ST(0))) : NULL;
	int	parameter = (int)SvIV(ST(1));
	double	value;
	double	RETVAL;
	dXSTARG;

	if (items >= 3) {
	    value = (double)SvNV(ST(2));
	}
#line 656 "ODE.xs"
        if (items == 3) {
            dJointSetSliderParam(joint, parameter, value);
            RETVAL = value;
        }
        else {
            RETVAL = dJointGetSliderParam(joint, parameter);
        }
#line 1438 "ODE.c"
	XSprePUSH; PUSHn((double)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__Contact__make); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__Contact__make)
{
    dXSARGS;
    if (items < 2 || items > 3)
	Perl_croak(aTHX_ "Usage: ODE::Joint::Contact::_make(world, group = NULL, params)");
    {
	dWorldID        world = SvROK(ST(0))
            ? (dWorldID) SvIV(SvRV(ST(0))) : NULL;
	dJointGroupID	group;
	HV*	params;
#line 673 "ODE.xs"
        dContact contact = {};
#line 1457 "ODE.c"
	dJointID_NEW	RETVAL;

	if (items < 2)
	    group = NULL;
	else {
	group = SvROK(ST(1))
	    ? (dJointGroupID) SvIV(SvRV(ST(1))) : NULL;
	}

	if (SvROK(ST(2)) && SvTYPE(SvRV(ST(2)))==SVt_PVHV)
	    params = (HV*)SvRV(ST(2));
	else
	    Perl_croak(aTHX_ "params is not a hash reference");
#line 675 "ODE.xs"
        /* XXX: Error checking in all this code, ugh */
        if (hv_exists(params, "mode", 4))
            contact.surface.mode       = SvIV(*hv_fetch(params, "mode", 4, 0));
        if (hv_exists(params, "mu", 2))
            contact.surface.mu         = SvNV(*hv_fetch(params, "mu", 2, 0));
        if (hv_exists(params, "mu2", 3))
            contact.surface.mu2        = SvNV(*hv_fetch(params, "mu2", 3, 0));
        if (hv_exists(params, "bounce", 6))
            contact.surface.bounce     = SvNV(*hv_fetch(params, "bounce", 6, 0));
        if (hv_exists(params, "bounce_vel", 10))
            contact.surface.bounce_vel = SvNV(*hv_fetch(params, "bounce_vel", 10, 0));
        if (hv_exists(params, "soft_erp", 8))
            contact.surface.soft_erp   = SvNV(*hv_fetch(params, "soft_erp", 8, 0));
        if (hv_exists(params, "soft_cfm", 8))
            contact.surface.soft_cfm   = SvNV(*hv_fetch(params, "soft_cfm", 8, 0));
        if (hv_exists(params, "motion1", 7))
            contact.surface.motion1    = SvNV(*hv_fetch(params, "motion1", 7, 0));
        if (hv_exists(params, "motion2", 7))
            contact.surface.motion2    = SvNV(*hv_fetch(params, "motion2", 7, 0));
        if (hv_exists(params, "slip1", 5))
            contact.surface.slip1      = SvNV(*hv_fetch(params, "slip1", 5, 0));
        if (hv_exists(params, "slip2", 5))
            contact.surface.slip2      = SvNV(*hv_fetch(params, "slip2", 5, 0));
        if (hv_exists(params, "fdir1", 5)) {
            dV v = (dV) SvPV_nolen(SvRV(*hv_fetch(params, "fdir1", 5, 0)));
            contact.fdir1[0] = v[0];
            contact.fdir1[1] = v[1];
            contact.fdir1[2] = v[2];
        }
        if (hv_exists(params, "pos", 3)) {
            dV v = (dV)SvPV_nolen(SvRV(*hv_fetch(params, "pos", 3, 0)));
            contact.geom.pos[0] = v[0];
            contact.geom.pos[1] = v[1];
            contact.geom.pos[2] = v[2];
        }
        if (hv_exists(params, "normal", 6)) {
            dV v = (dV)SvPV_nolen(SvRV(*hv_fetch(params, "normal", 6, 0)));
            contact.geom.normal[0] = v[0];
            contact.geom.normal[1] = v[1];
            contact.geom.normal[2] = v[2];
        }
        if (hv_exists(params, "depth", 5)) {
            contact.geom.depth = SvNV(*hv_fetch(params, "depth", 5, 0));
        }

        RETVAL = dJointCreateContact(world, group, &contact);
#line 1518 "ODE.c"
	ST(0) = sv_newmortal();
        if (RETVAL) {
            dJointSetData(RETVAL, (void*)newSViv((IV)RETVAL));
            ST(0) = _get_joint_sv(RETVAL);
        }
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__Universal__make); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__Universal__make)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Joint::Universal::_make(world, group = NULL)");
    {
	dWorldID        world = SvROK(ST(0))
            ? (dWorldID) SvIV(SvRV(ST(0))) : NULL;
	dJointGroupID	group;
	dJointID_NEW	RETVAL;

	if (items < 2)
	    group = NULL;
	else {
	group = SvROK(ST(1))
	    ? (dJointGroupID) SvIV(SvRV(ST(1))) : NULL;
	}
#line 730 "ODE.xs"
        RETVAL = dJointCreateUniversal(world, group);
#line 1548 "ODE.c"
	ST(0) = sv_newmortal();
        if (RETVAL) {
            dJointSetData(RETVAL, (void*)newSViv((IV)RETVAL));
            ST(0) = _get_joint_sv(RETVAL);
        }
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__Universal_anchor); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__Universal_anchor)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Joint::Universal::anchor(inv, vec = NO_INIT)");
    {
	dJointID        inv = SvROK(ST(0))
            ? (dJointID) SvIV(SvRV(ST(0))) : NULL;
	dV	vec;
#line 738 "ODE.xs"
        dVector3 result;
#line 1570 "ODE.c"
	dV	RETVAL;

	if (items >= 2) {
	if (sv_isa(ST(1), "ODE::Vector")) {
	    vec = (dV)SvPV_nolen(SvRV(ST(1)));
	}
	else {
	    Perl_croak(aTHX_ "vec is not of type dV");
	};
	}
#line 740 "ODE.xs"
        if (items == 2) {
            dJointSetUniversalAnchor(inv, vec[0], vec[1], vec[2]);
            RETVAL = vec;
        }
        else {
            dJointGetUniversalAnchor(inv, result);
            RETVAL = result;
        }
#line 1590 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Vector", (void*)RETVAL, sizeof(dVector3));
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__Universal_axis1); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__Universal_axis1)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Joint::Universal::axis1(inv, vec = NO_INIT)");
    {
	dJointID        inv = SvROK(ST(0))
            ? (dJointID) SvIV(SvRV(ST(0))) : NULL;
	dV	vec;
#line 755 "ODE.xs"
        dVector3 result;
#line 1609 "ODE.c"
	dV	RETVAL;

	if (items >= 2) {
	if (sv_isa(ST(1), "ODE::Vector")) {
	    vec = (dV)SvPV_nolen(SvRV(ST(1)));
	}
	else {
	    Perl_croak(aTHX_ "vec is not of type dV");
	};
	}
#line 757 "ODE.xs"
        if (items == 2) {
            dJointSetUniversalAxis1(inv, vec[0], vec[1], vec[2]);
            RETVAL = vec;
        }
        else {
            dJointGetUniversalAxis1(inv, result);
            RETVAL = result;
        }
#line 1629 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Vector", (void*)RETVAL, sizeof(dVector3));
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__Universal_axis2); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__Universal_axis2)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Joint::Universal::axis2(inv, vec = NO_INIT)");
    {
	dJointID        inv = SvROK(ST(0))
            ? (dJointID) SvIV(SvRV(ST(0))) : NULL;
	dV	vec;
#line 772 "ODE.xs"
        dVector3 result;
#line 1648 "ODE.c"
	dV	RETVAL;

	if (items >= 2) {
	if (sv_isa(ST(1), "ODE::Vector")) {
	    vec = (dV)SvPV_nolen(SvRV(ST(1)));
	}
	else {
	    Perl_croak(aTHX_ "vec is not of type dV");
	};
	}
#line 774 "ODE.xs"
        if (items == 2) {
            dJointSetUniversalAxis2(inv, vec[0], vec[1], vec[2]);
            RETVAL = vec;
        }
        else {
            dJointGetUniversalAxis2(inv, result);
            RETVAL = result;
        }
#line 1668 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Vector", (void*)RETVAL, sizeof(dVector3));
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__Universal__param); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__Universal__param)
{
    dXSARGS;
    if (items < 2 || items > 3)
	Perl_croak(aTHX_ "Usage: ODE::Joint::Universal::_param(joint, parameter, value = NO_INIT)");
    {
	dJointID        joint = SvROK(ST(0))
            ? (dJointID) SvIV(SvRV(ST(0))) : NULL;
	int	parameter = (int)SvIV(ST(1));
	double	value;
	double	RETVAL;
	dXSTARG;

	if (items >= 3) {
	    value = (double)SvNV(ST(2));
	}
#line 790 "ODE.xs"
        if (items == 3) {
            dJointSetUniversalParam(joint, parameter, value);
            RETVAL = value;
        }
        else {
            RETVAL = dJointGetUniversalParam(joint, parameter);
        }
#line 1700 "ODE.c"
	XSprePUSH; PUSHn((double)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__DoubleHinge__make); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__DoubleHinge__make)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Joint::DoubleHinge::_make(world, group = NULL)");
    {
	dWorldID        world = SvROK(ST(0))
            ? (dWorldID) SvIV(SvRV(ST(0))) : NULL;
	dJointGroupID	group;
	dJointID_NEW	RETVAL;

	if (items < 2)
	    group = NULL;
	else {
	group = SvROK(ST(1))
	    ? (dJointGroupID) SvIV(SvRV(ST(1))) : NULL;
	}
#line 806 "ODE.xs"
        RETVAL = dJointCreateHinge2(world, group);
#line 1726 "ODE.c"
	ST(0) = sv_newmortal();
        if (RETVAL) {
            dJointSetData(RETVAL, (void*)newSViv((IV)RETVAL));
            ST(0) = _get_joint_sv(RETVAL);
        }
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__DoubleHinge_anchor); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__DoubleHinge_anchor)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Joint::DoubleHinge::anchor(inv, vec = NO_INIT)");
    {
	dJointID        inv = SvROK(ST(0))
            ? (dJointID) SvIV(SvRV(ST(0))) : NULL;
	dV	vec;
#line 814 "ODE.xs"
        dVector3 result;
#line 1748 "ODE.c"
	dV	RETVAL;

	if (items >= 2) {
	if (sv_isa(ST(1), "ODE::Vector")) {
	    vec = (dV)SvPV_nolen(SvRV(ST(1)));
	}
	else {
	    Perl_croak(aTHX_ "vec is not of type dV");
	};
	}
#line 816 "ODE.xs"
        if (items == 2) {
            dJointSetHinge2Anchor(inv, vec[0], vec[1], vec[2]);
            RETVAL = vec;
        }
        else {
            dJointGetHinge2Anchor(inv, result);
            RETVAL = result;
        }
#line 1768 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Vector", (void*)RETVAL, sizeof(dVector3));
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__DoubleHinge_axis1); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__DoubleHinge_axis1)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Joint::DoubleHinge::axis1(inv, vec = NO_INIT)");
    {
	dJointID        inv = SvROK(ST(0))
            ? (dJointID) SvIV(SvRV(ST(0))) : NULL;
	dV	vec;
#line 831 "ODE.xs"
        dVector3 result;
#line 1787 "ODE.c"
	dV	RETVAL;

	if (items >= 2) {
	if (sv_isa(ST(1), "ODE::Vector")) {
	    vec = (dV)SvPV_nolen(SvRV(ST(1)));
	}
	else {
	    Perl_croak(aTHX_ "vec is not of type dV");
	};
	}
#line 833 "ODE.xs"
        if (items == 2) {
            dJointSetHinge2Axis1(inv, vec[0], vec[1], vec[2]);
            RETVAL = vec;
        }
        else {
            dJointGetHinge2Axis1(inv, result);
            RETVAL = result;
        }
#line 1807 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Vector", (void*)RETVAL, sizeof(dVector3));
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__DoubleHinge_axis2); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__DoubleHinge_axis2)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Joint::DoubleHinge::axis2(inv, vec = NO_INIT)");
    {
	dJointID        inv = SvROK(ST(0))
            ? (dJointID) SvIV(SvRV(ST(0))) : NULL;
	dV	vec;
#line 848 "ODE.xs"
        dVector3 result;
#line 1826 "ODE.c"
	dV	RETVAL;

	if (items >= 2) {
	if (sv_isa(ST(1), "ODE::Vector")) {
	    vec = (dV)SvPV_nolen(SvRV(ST(1)));
	}
	else {
	    Perl_croak(aTHX_ "vec is not of type dV");
	};
	}
#line 850 "ODE.xs"
        if (items == 2) {
            dJointSetHinge2Axis2(inv, vec[0], vec[1], vec[2]);
            RETVAL = vec;
        }
        else {
            dJointGetHinge2Axis2(inv, result);
            RETVAL = result;
        }
#line 1846 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Vector", (void*)RETVAL, sizeof(dVector3));
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__DoubleHinge_angle1); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__DoubleHinge_angle1)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Joint::DoubleHinge::angle1(joint)");
    {
	dJointID        joint = SvROK(ST(0))
            ? (dJointID) SvIV(SvRV(ST(0))) : NULL;
	double	RETVAL;
	dXSTARG;
#line 864 "ODE.xs"
        RETVAL = dJointGetHinge2Angle1(joint);
#line 1866 "ODE.c"
	XSprePUSH; PUSHn((double)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__DoubleHinge_angle1_rate); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__DoubleHinge_angle1_rate)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Joint::DoubleHinge::angle1_rate(joint)");
    {
	dJointID        joint = SvROK(ST(0))
            ? (dJointID) SvIV(SvRV(ST(0))) : NULL;
	double	RETVAL;
	dXSTARG;
#line 873 "ODE.xs"
        RETVAL = dJointGetHinge2Angle1Rate(joint);
#line 1885 "ODE.c"
	XSprePUSH; PUSHn((double)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__DoubleHinge_angle2_rate); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__DoubleHinge_angle2_rate)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Joint::DoubleHinge::angle2_rate(joint)");
    {
	dJointID        joint = SvROK(ST(0))
            ? (dJointID) SvIV(SvRV(ST(0))) : NULL;
	double	RETVAL;
	dXSTARG;
#line 880 "ODE.xs"
        RETVAL = dJointGetHinge2Angle2Rate(joint);
#line 1904 "ODE.c"
	XSprePUSH; PUSHn((double)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__DoubleHinge__param); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__DoubleHinge__param)
{
    dXSARGS;
    if (items < 2 || items > 3)
	Perl_croak(aTHX_ "Usage: ODE::Joint::DoubleHinge::_param(joint, parameter, value = NO_INIT)");
    {
	dJointID        joint = SvROK(ST(0))
            ? (dJointID) SvIV(SvRV(ST(0))) : NULL;
	int	parameter = (int)SvIV(ST(1));
	double	value;
	double	RETVAL;
	dXSTARG;

	if (items >= 3) {
	    value = (double)SvNV(ST(2));
	}
#line 889 "ODE.xs"
        if (items == 3) {
            dJointSetHinge2Param(joint, parameter, value);
            RETVAL = value;
        }
        else {
            RETVAL = dJointGetHinge2Param(joint, parameter);
        }
#line 1935 "ODE.c"
	XSprePUSH; PUSHn((double)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__Fixed__make); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__Fixed__make)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Joint::Fixed::_make(world, group = NULL)");
    {
	dWorldID        world = SvROK(ST(0))
            ? (dWorldID) SvIV(SvRV(ST(0))) : NULL;
	dJointGroupID	group;
	dJointID_NEW	RETVAL;

	if (items < 2)
	    group = NULL;
	else {
	group = SvROK(ST(1))
	    ? (dJointGroupID) SvIV(SvRV(ST(1))) : NULL;
	}
#line 905 "ODE.xs"
        RETVAL = dJointCreateFixed(world, group);
#line 1961 "ODE.c"
	ST(0) = sv_newmortal();
        if (RETVAL) {
            dJointSetData(RETVAL, (void*)newSViv((IV)RETVAL));
            ST(0) = _get_joint_sv(RETVAL);
        }
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__Fixed_reset); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__Fixed_reset)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Joint::Fixed::reset(joint)");
    {
	dJointID        joint = SvROK(ST(0))
            ? (dJointID) SvIV(SvRV(ST(0))) : NULL;
#line 912 "ODE.xs"
        dJointSetFixed(joint);
#line 1982 "ODE.c"
    }
    XSRETURN_EMPTY;
}

XS(XS_ODE__Joint__AngularMotor__make); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__AngularMotor__make)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Joint::AngularMotor::_make(world, group = NULL)");
    {
	dWorldID        world = SvROK(ST(0))
            ? (dWorldID) SvIV(SvRV(ST(0))) : NULL;
	dJointGroupID	group;
	dJointID_NEW	RETVAL;

	if (items < 2)
	    group = NULL;
	else {
	group = SvROK(ST(1))
	    ? (dJointGroupID) SvIV(SvRV(ST(1))) : NULL;
	}
#line 920 "ODE.xs"
        RETVAL = dJointCreateAMotor(world, group);
#line 2007 "ODE.c"
	ST(0) = sv_newmortal();
        if (RETVAL) {
            dJointSetData(RETVAL, (void*)newSViv((IV)RETVAL));
            ST(0) = _get_joint_sv(RETVAL);
        }
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__AngularMotor_num_axes); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__AngularMotor_num_axes)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Joint::AngularMotor::num_axes(joint, num = NO_INIT)");
    {
	dJointID        joint = SvROK(ST(0))
            ? (dJointID) SvIV(SvRV(ST(0))) : NULL;
	int	num;
	int	RETVAL;
	dXSTARG;

	if (items >= 2) {
	    num = (int)SvIV(ST(1));
	}
#line 928 "ODE.xs"
        if (items == 2) {
            dJointSetAMotorNumAxes(joint, num);
            RETVAL = num;
        }
        else {
            RETVAL = dJointGetAMotorNumAxes(joint);
        }
#line 2041 "ODE.c"
	XSprePUSH; PUSHi((IV)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__AngularMotor_axis); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__AngularMotor_axis)
{
    dXSARGS;
    if (items < 2 || items > 4)
	Perl_croak(aTHX_ "Usage: ODE::Joint::AngularMotor::axis(joint, num, rel = NO_INIT, axis = NO_INIT)");
    {
	dJointID        joint = SvROK(ST(0))
            ? (dJointID) SvIV(SvRV(ST(0))) : NULL;
	int	num = (int)SvIV(ST(1));
	int	rel;
	dV	axis;
#line 944 "ODE.xs"
        dVector3 ret;
#line 2061 "ODE.c"
	dV	RETVAL;

	if (items >= 3) {
	    rel = (int)SvIV(ST(2));
	}

	if (items >= 4) {
	if (sv_isa(ST(3), "ODE::Vector")) {
	    axis = (dV)SvPV_nolen(SvRV(ST(3)));
	}
	else {
	    Perl_croak(aTHX_ "axis is not of type dV");
	};
	}
#line 946 "ODE.xs"
        if (items == 3) {
            croak("ODE::Joint::AngularMotor::axis: Usage: $joint->axis($num, [ $rel, $axis ])");
        }
        else if (items == 4) {
            dJointSetAMotorAxis(joint, num, rel, axis[0], axis[1], axis[2]);
            RETVAL = axis;
        }
        else if (items == 2) {
            dJointGetAMotorAxis(joint, num, ret);
            RETVAL = ret;
        }
#line 2088 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Vector", (void*)RETVAL, sizeof(dVector3));
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__AngularMotor_angle); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__AngularMotor_angle)
{
    dXSARGS;
    if (items < 2 || items > 3)
	Perl_croak(aTHX_ "Usage: ODE::Joint::AngularMotor::angle(joint, num, angle = NO_INIT)");
    {
	dJointID        joint = SvROK(ST(0))
            ? (dJointID) SvIV(SvRV(ST(0))) : NULL;
	int	num = (int)SvIV(ST(1));
	double	angle;
	double	RETVAL;
	dXSTARG;

	if (items >= 3) {
	    angle = (double)SvNV(ST(2));
	}
#line 965 "ODE.xs"
        if (items == 2) {
            RETVAL = dJointGetAMotorAngle(joint, num);
        }
        else {
            dJointSetAMotorAngle(joint, num, angle);
            RETVAL = angle;
        }
#line 2120 "ODE.c"
	XSprePUSH; PUSHn((double)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__AngularMotor_angle_rate); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__AngularMotor_angle_rate)
{
    dXSARGS;
    if (items != 2)
	Perl_croak(aTHX_ "Usage: ODE::Joint::AngularMotor::angle_rate(joint, num)");
    {
	dJointID        joint = SvROK(ST(0))
            ? (dJointID) SvIV(SvRV(ST(0))) : NULL;
	int	num = (int)SvIV(ST(1));
	double	RETVAL;
	dXSTARG;
#line 979 "ODE.xs"
        RETVAL = dJointGetAMotorAngleRate(joint, num);
#line 2140 "ODE.c"
	XSprePUSH; PUSHn((double)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__AngularMotor__param); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__AngularMotor__param)
{
    dXSARGS;
    if (items < 2 || items > 3)
	Perl_croak(aTHX_ "Usage: ODE::Joint::AngularMotor::_param(joint, parameter, value = NO_INIT)");
    {
	dJointID        joint = SvROK(ST(0))
            ? (dJointID) SvIV(SvRV(ST(0))) : NULL;
	int	parameter = (int)SvIV(ST(1));
	double	value;
	double	RETVAL;
	dXSTARG;

	if (items >= 3) {
	    value = (double)SvNV(ST(2));
	}
#line 988 "ODE.xs"
        if (items == 3) {
            dJointSetAMotorParam(joint, parameter, value);
            RETVAL = value;
        }
        else {
            RETVAL = dJointGetAMotorParam(joint, parameter);
        }
#line 2171 "ODE.c"
	XSprePUSH; PUSHn((double)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__Plane2D__make); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__Plane2D__make)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Joint::Plane2D::_make(world, group = NULL)");
    {
	dWorldID        world = SvROK(ST(0))
            ? (dWorldID) SvIV(SvRV(ST(0))) : NULL;
	dJointGroupID	group;
	dJointID_NEW	RETVAL;

	if (items < 2)
	    group = NULL;
	else {
	group = SvROK(ST(1))
	    ? (dJointGroupID) SvIV(SvRV(ST(1))) : NULL;
	}
#line 1004 "ODE.xs"
        RETVAL = dJointCreatePlane2D(world, group);
#line 2197 "ODE.c"
	ST(0) = sv_newmortal();
        if (RETVAL) {
            dJointSetData(RETVAL, (void*)newSViv((IV)RETVAL));
            ST(0) = _get_joint_sv(RETVAL);
        }
    }
    XSRETURN(1);
}

XS(XS_ODE__Joint__Plane2D__param); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Joint__Plane2D__param)
{
    dXSARGS;
    if (items < 2 || items > 3)
	Perl_croak(aTHX_ "Usage: ODE::Joint::Plane2D::_param(joint, parameter, value = NO_INIT)");
    {
	dJointID        joint = SvROK(ST(0))
            ? (dJointID) SvIV(SvRV(ST(0))) : NULL;
	int	parameter = (int)SvIV(ST(1));
	double	value;
	double	RETVAL;
	dXSTARG;

	if (items >= 3) {
	    value = (double)SvNV(ST(2));
	}
#line 1013 "ODE.xs"
        RETVAL = 0;
#line 2226 "ODE.c"
	XSprePUSH; PUSHn((double)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__ContactGeom_pos); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__ContactGeom_pos)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::ContactGeom::pos(geom)");
    {
	ContactGeom	geom;
	dV	RETVAL;

        if (sv_isa(ST(0), "ODE::ContactGeom")) {
            geom = (ContactGeom)SvPV_nolen(SvRV(ST(0)));
        }
        else {
            Perl_croak(aTHX_ "geom is not of type ContactGeom");
        };
#line 1022 "ODE.xs"
        RETVAL = geom->pos;
#line 2250 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Vector", (void*)RETVAL, sizeof(dVector3));
    }
    XSRETURN(1);
}

XS(XS_ODE__ContactGeom_normal); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__ContactGeom_normal)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::ContactGeom::normal(geom)");
    {
	ContactGeom	geom;
	dV	RETVAL;

        if (sv_isa(ST(0), "ODE::ContactGeom")) {
            geom = (ContactGeom)SvPV_nolen(SvRV(ST(0)));
        }
        else {
            Perl_croak(aTHX_ "geom is not of type ContactGeom");
        };
#line 1029 "ODE.xs"
        RETVAL = geom->normal;
#line 2275 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Vector", (void*)RETVAL, sizeof(dVector3));
    }
    XSRETURN(1);
}

XS(XS_ODE__ContactGeom_depth); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__ContactGeom_depth)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::ContactGeom::depth(geom)");
    {
	ContactGeom	geom;
	double	RETVAL;
	dXSTARG;

        if (sv_isa(ST(0), "ODE::ContactGeom")) {
            geom = (ContactGeom)SvPV_nolen(SvRV(ST(0)));
        }
        else {
            Perl_croak(aTHX_ "geom is not of type ContactGeom");
        };
#line 1036 "ODE.xs"
        RETVAL = geom->depth;
#line 2301 "ODE.c"
	XSprePUSH; PUSHn((double)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__ContactGeom_g1); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__ContactGeom_g1)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::ContactGeom::g1(geom)");
    {
	ContactGeom	geom;
	dGeomID	RETVAL;

        if (sv_isa(ST(0), "ODE::ContactGeom")) {
            geom = (ContactGeom)SvPV_nolen(SvRV(ST(0)));
        }
        else {
            Perl_croak(aTHX_ "geom is not of type ContactGeom");
        };
#line 1043 "ODE.xs"
        RETVAL = geom->g1;
#line 2325 "ODE.c"
	ST(0) = sv_newmortal();
        if (RETVAL) {
            ST(0) = _get_geom_sv((dGeomID)RETVAL);
        }
    }
    XSRETURN(1);
}

XS(XS_ODE__ContactGeom_g2); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__ContactGeom_g2)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::ContactGeom::g2(geom)");
    {
	ContactGeom	geom;
	dGeomID	RETVAL;

        if (sv_isa(ST(0), "ODE::ContactGeom")) {
            geom = (ContactGeom)SvPV_nolen(SvRV(ST(0)));
        }
        else {
            Perl_croak(aTHX_ "geom is not of type ContactGeom");
        };
#line 1050 "ODE.xs"
        RETVAL = geom->g2;
#line 2352 "ODE.c"
	ST(0) = sv_newmortal();
        if (RETVAL) {
            ST(0) = _get_geom_sv((dGeomID)RETVAL);
        }
    }
    XSRETURN(1);
}

XS(XS_ODE__Geom_destroy); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom_destroy)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Geom::destroy(geomsv)");
    {
	SV*	geomsv = ST(0);
#line 1059 "ODE.xs"
        dGeomID geom;;
        HV* stash;
#line 2372 "ODE.c"
#line 1062 "ODE.xs"
        geom = SvROK(geomsv) ? (dGeomID)SvIV(SvRV(geomsv)) : NULL;
        if (geom) {
            dGeomDestroy(geom);
        }
        stash = gv_stashpv("ODE::Null", 1);
        sv_bless(geomsv, stash);  /* Rebless into Null so that we don't get segfaults */
#line 2380 "ODE.c"
    }
    XSRETURN_EMPTY;
}

XS(XS_ODE__Geom_body); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom_body)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Geom::body(geom, ibody = NO_INIT)");
    {
	dGeomID        geom = SvROK(ST(0))
            ? (dGeomID) SvIV(SvRV(ST(0))) : NULL;
	dBodyID	ibody;
	dBodyID	RETVAL;

	if (items >= 2) {
	ibody = SvROK(ST(1))
	    ? (dBodyID) SvIV(SvRV(ST(1))) : NULL;
	}
#line 1073 "ODE.xs"
        if (items == 2) {
            dGeomSetBody(geom, ibody);
            RETVAL = ibody;
        }
        else {
            RETVAL = dGeomGetBody(geom);
        }
#line 2409 "ODE.c"
	ST(0) = sv_newmortal();
        if (RETVAL) {
            ST(0) = _get_body_sv(RETVAL);
        }
    }
    XSRETURN(1);
}

XS(XS_ODE__Geom_position); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom_position)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Geom::position(inv, vec = NO_INIT)");
    {
	dGeomID        inv = SvROK(ST(0))
            ? (dGeomID) SvIV(SvRV(ST(0))) : NULL;
	dV	vec;
	dV	RETVAL;

	if (items >= 2) {
	if (sv_isa(ST(1), "ODE::Vector")) {
	    vec = (dV)SvPV_nolen(SvRV(ST(1)));
	}
	else {
	    Perl_croak(aTHX_ "vec is not of type dV");
	};
	}
#line 1087 "ODE.xs"
        if (items == 2) {
            dGeomSetPosition(inv, vec[0], vec[1], vec[2]);
            RETVAL = vec;
        }
        else {
            RETVAL = (dV)dGeomGetPosition(inv);
        }
#line 2446 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Vector", (void*)RETVAL, sizeof(dVector3));
    }
    XSRETURN(1);
}

XS(XS_ODE__Geom_rotation); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom_rotation)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Geom::rotation(geom, rot = NO_INIT)");
    {
	dGeomID        geom = SvROK(ST(0))
            ? (dGeomID) SvIV(SvRV(ST(0))) : NULL;
	dQ	rot;
#line 1101 "ODE.xs"
        dQuaternion retq;
#line 2465 "ODE.c"
	dQ	RETVAL;

	if (items >= 2) {
	if (sv_isa(ST(1), "ODE::Quaternion")) {
	    rot = (dQ)SvPV_nolen(SvRV(ST(1)));
	}
	else {
	    Perl_croak(aTHX_ "rot is not of type dQ");
	};
	}
#line 1103 "ODE.xs"
        if (items == 2) {
            dGeomSetQuaternion(geom, rot);
            RETVAL = rot;
        }
        else {
            dGeomGetQuaternion(geom, retq);
            RETVAL = retq;
        }
#line 2485 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Quaternion", (void*)RETVAL, sizeof(dQuaternion));
    }
    XSRETURN(1);
}

XS(XS_ODE__Geom_aabb); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom_aabb)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Geom::aabb(geom)");
    SP -= items;
    {
	dGeomID        geom = SvROK(ST(0))
            ? (dGeomID) SvIV(SvRV(ST(0))) : NULL;
#line 1119 "ODE.xs"
        double v[6];
#line 2504 "ODE.c"
#line 1121 "ODE.xs"
        dGeomGetAABB(geom, v);
        EXTEND(SP, 6);
        PUSHs(sv_2mortal(newSVnv(v[0])));
        PUSHs(sv_2mortal(newSVnv(v[1])));
        PUSHs(sv_2mortal(newSVnv(v[2])));
        PUSHs(sv_2mortal(newSVnv(v[3])));
        PUSHs(sv_2mortal(newSVnv(v[4])));
        PUSHs(sv_2mortal(newSVnv(v[5])));
#line 2514 "ODE.c"
	PUTBACK;
	return;
    }
}

XS(XS_ODE__Geom_is_space); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom_is_space)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Geom::is_space(geom)");
    {
	dGeomID        geom = SvROK(ST(0))
            ? (dGeomID) SvIV(SvRV(ST(0))) : NULL;
	int	RETVAL;
	dXSTARG;
#line 1133 "ODE.xs"
        RETVAL = dGeomIsSpace(geom);
#line 2533 "ODE.c"
	XSprePUSH; PUSHi((IV)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Geom_space); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom_space)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Geom::space(geom)");
    {
	dGeomID        geom = SvROK(ST(0))
            ? (dGeomID) SvIV(SvRV(ST(0))) : NULL;
	dSpaceID	RETVAL;
#line 1140 "ODE.xs"
        RETVAL = dGeomGetSpace(geom);
#line 2551 "ODE.c"
	ST(0) = sv_newmortal();
        if (RETVAL) {
            ST(0) = _get_geom_sv((dGeomID)RETVAL);
        }
    }
    XSRETURN(1);
}

XS(XS_ODE__Geom_category_bits); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom_category_bits)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Geom::category_bits(geom, bits = NO_INIT)");
    {
	dGeomID        geom = SvROK(ST(0))
            ? (dGeomID) SvIV(SvRV(ST(0))) : NULL;
	unsigned long	bits;
	unsigned long	RETVAL;
	dXSTARG;

	if (items >= 2) {
	    bits = (unsigned long)SvUV(ST(1));
	}
#line 1148 "ODE.xs"
        if (items == 2) {
            dGeomSetCategoryBits(geom, bits);
            RETVAL = bits;
        }
        else {
            RETVAL = dGeomGetCategoryBits(geom);
        }
#line 2584 "ODE.c"
	XSprePUSH; PUSHu((UV)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Geom_collide_bits); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom_collide_bits)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Geom::collide_bits(geom, bits = NO_INIT)");
    {
	dGeomID        geom = SvROK(ST(0))
            ? (dGeomID) SvIV(SvRV(ST(0))) : NULL;
	unsigned long	bits;
	unsigned long	RETVAL;
	dXSTARG;

	if (items >= 2) {
	    bits = (unsigned long)SvUV(ST(1));
	}
#line 1162 "ODE.xs"
        if (items == 2) {
            dGeomSetCollideBits(geom, bits);
            RETVAL = bits;
        }
        else {
            RETVAL = dGeomGetCollideBits(geom);
        }
#line 2614 "ODE.c"
	XSprePUSH; PUSHu((UV)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Geom_enable); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom_enable)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Geom::enable(geom)");
    {
	dGeomID        geom = SvROK(ST(0))
            ? (dGeomID) SvIV(SvRV(ST(0))) : NULL;
#line 1175 "ODE.xs"
        dGeomEnable(geom);
#line 2631 "ODE.c"
    }
    XSRETURN_EMPTY;
}

XS(XS_ODE__Geom_disable); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom_disable)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Geom::disable(geom)");
    {
	dGeomID        geom = SvROK(ST(0))
            ? (dGeomID) SvIV(SvRV(ST(0))) : NULL;
#line 1180 "ODE.xs"
        dGeomDisable(geom);
#line 2647 "ODE.c"
    }
    XSRETURN_EMPTY;
}

XS(XS_ODE__Geom_enabled); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom_enabled)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Geom::enabled(geom)");
    {
	dGeomID        geom = SvROK(ST(0))
            ? (dGeomID) SvIV(SvRV(ST(0))) : NULL;
	int	RETVAL;
	dXSTARG;
#line 1185 "ODE.xs"
        RETVAL = dGeomIsEnabled(geom);
#line 2665 "ODE.c"
	XSprePUSH; PUSHi((IV)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Geom_collide); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom_collide)
{
    dXSARGS;
    if (items != 2)
	Perl_croak(aTHX_ "Usage: ODE::Geom::collide(geom, other)");
    SP -= items;
    {
	dGeomID        geom = SvROK(ST(0))
            ? (dGeomID) SvIV(SvRV(ST(0))) : NULL;
	dGeomID        other = SvROK(ST(1))
            ? (dGeomID) SvIV(SvRV(ST(1))) : NULL;
#line 1193 "ODE.xs"
        int ncontacts, i;
        dContactGeom geoms[COLLIDE_BUFSIZE];
#line 2686 "ODE.c"
#line 1196 "ODE.xs"
        ncontacts = dCollide(geom, other, COLLIDE_BUFSIZE, geoms, sizeof(dContactGeom));
        EXTEND(SP, ncontacts);
        for (i = 0; i < ncontacts; i++) {
            SV* ret = sv_newmortal();
            sv_setref_pvn(ret, "ODE::ContactGeom", (void*)&geoms[i], sizeof(dContactGeom));
            PUSHs(ret);
        }
#line 2695 "ODE.c"
	PUTBACK;
	return;
    }
}

XS(XS_ODE__Geom_multi_collide); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom_multi_collide)
{
    dXSARGS;
    if (items != 3)
	Perl_croak(aTHX_ "Usage: ODE::Geom::multi_collide(geom, other, callback)");
    {
	dGeomID        geom = SvROK(ST(0))
            ? (dGeomID) SvIV(SvRV(ST(0))) : NULL;
	dGeomID        other = SvROK(ST(1))
            ? (dGeomID) SvIV(SvRV(ST(1))) : NULL;
	SV*	callback = ST(2);
#line 1209 "ODE.xs"
        dSpaceCollide2(geom, other, (void*)callback, &_near_callback);
#line 2715 "ODE.c"
    }
    XSRETURN_EMPTY;
}

XS(XS_ODE__Geom__Space__destroy); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom__Space__destroy)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Geom::Space::_destroy(space)");
    {
	dSpaceID        space = SvROK(ST(0))
            ? (dSpaceID) SvIV(SvRV(ST(0))) : NULL;
#line 1216 "ODE.xs"
        dSpaceDestroy(space);
#line 2731 "ODE.c"
    }
    XSRETURN_EMPTY;
}

XS(XS_ODE__Geom__Space_space_collide); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom__Space_space_collide)
{
    dXSARGS;
    if (items != 2)
	Perl_croak(aTHX_ "Usage: ODE::Geom::Space::space_collide(space, callback)");
    {
	dSpaceID        space = SvROK(ST(0))
            ? (dSpaceID) SvIV(SvRV(ST(0))) : NULL;
	SV*	callback = ST(1);
#line 1222 "ODE.xs"
        dSpaceCollide(space, (void*)callback, &_near_callback);
#line 2748 "ODE.c"
    }
    XSRETURN_EMPTY;
}

XS(XS_ODE__Geom__Space_add); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom__Space_add)
{
    dXSARGS;
    if (items != 2)
	Perl_croak(aTHX_ "Usage: ODE::Geom::Space::add(space, geom)");
    {
	dSpaceID        space = SvROK(ST(0))
            ? (dSpaceID) SvIV(SvRV(ST(0))) : NULL;
	dGeomID        geom = SvROK(ST(1))
            ? (dGeomID) SvIV(SvRV(ST(1))) : NULL;
#line 1228 "ODE.xs"
        dSpaceAdd(space, geom);
#line 2766 "ODE.c"
    }
    XSRETURN_EMPTY;
}

XS(XS_ODE__Geom__Space_remove); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom__Space_remove)
{
    dXSARGS;
    if (items != 2)
	Perl_croak(aTHX_ "Usage: ODE::Geom::Space::remove(space, geom)");
    {
	dSpaceID        space = SvROK(ST(0))
            ? (dSpaceID) SvIV(SvRV(ST(0))) : NULL;
	dGeomID        geom = SvROK(ST(1))
            ? (dGeomID) SvIV(SvRV(ST(1))) : NULL;
#line 1234 "ODE.xs"
        dSpaceRemove(space, geom);
#line 2784 "ODE.c"
    }
    XSRETURN_EMPTY;
}

XS(XS_ODE__Geom__Space_query); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom__Space_query)
{
    dXSARGS;
    if (items != 2)
	Perl_croak(aTHX_ "Usage: ODE::Geom::Space::query(space, geom)");
    {
	dSpaceID        space = SvROK(ST(0))
            ? (dSpaceID) SvIV(SvRV(ST(0))) : NULL;
	dGeomID        geom = SvROK(ST(1))
            ? (dGeomID) SvIV(SvRV(ST(1))) : NULL;
	int	RETVAL;
	dXSTARG;
#line 1240 "ODE.xs"
        RETVAL = dSpaceQuery(space, geom);
#line 2804 "ODE.c"
	XSprePUSH; PUSHi((IV)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Geom__Space_geoms); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom__Space_geoms)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Geom::Space::geoms(space)");
    SP -= items;
    {
	dSpaceID        space = SvROK(ST(0))
            ? (dSpaceID) SvIV(SvRV(ST(0))) : NULL;
#line 1247 "ODE.xs"
        int num_geoms, i;
#line 2822 "ODE.c"
#line 1249 "ODE.xs"
        num_geoms = dSpaceGetNumGeoms(space);
        EXTEND(sp, num_geoms);
        for (i = 0; i < num_geoms; i++) {
            PUSHs(_get_geom_sv(dSpaceGetGeom(space, i)));
        }
#line 2829 "ODE.c"
	PUTBACK;
	return;
    }
}

XS(XS_ODE__Geom__Space__Simple__make); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom__Space__Simple__make)
{
    dXSARGS;
    if (items < 0 || items > 1)
	Perl_croak(aTHX_ "Usage: ODE::Geom::Space::Simple::_make(parent = NULL)");
    {
	dSpaceID	parent;
	dSpaceID_NEW	RETVAL;

	if (items < 1)
	    parent = NULL;
	else {
	parent = SvROK(ST(0))
	    ? (dSpaceID) SvIV(SvRV(ST(0))) : NULL;
	}
#line 1260 "ODE.xs"
        RETVAL = dSimpleSpaceCreate(parent);
        dSpaceSetCleanup(RETVAL, 0);
#line 2854 "ODE.c"
	ST(0) = sv_newmortal();
        if (RETVAL) {
            dGeomSetData((dGeomID)RETVAL, (void*)newSViv((IV)RETVAL));
            ST(0) = _get_geom_sv((dGeomID)RETVAL);
        }
    }
    XSRETURN(1);
}

XS(XS_ODE__Geom__Space__Hash__make); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom__Space__Hash__make)
{
    dXSARGS;
    if (items < 0 || items > 1)
	Perl_croak(aTHX_ "Usage: ODE::Geom::Space::Hash::_make(parent = NULL)");
    {
	dSpaceID	parent;
	dSpaceID_NEW	RETVAL;

	if (items < 1)
	    parent = NULL;
	else {
	parent = SvROK(ST(0))
	    ? (dSpaceID) SvIV(SvRV(ST(0))) : NULL;
	}
#line 1270 "ODE.xs"
        RETVAL = dHashSpaceCreate(parent);
        dSpaceSetCleanup(RETVAL, 0);
#line 2883 "ODE.c"
	ST(0) = sv_newmortal();
        if (RETVAL) {
            dGeomSetData((dGeomID)RETVAL, (void*)newSViv((IV)RETVAL));
            ST(0) = _get_geom_sv((dGeomID)RETVAL);
        }
    }
    XSRETURN(1);
}

XS(XS_ODE__Geom__Space__Hash_levels); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom__Space__Hash_levels)
{
    dXSARGS;
    if (items < 1 || items > 3)
	Perl_croak(aTHX_ "Usage: ODE::Geom::Space::Hash::levels(space, min= NO_INIT, max= NO_INIT)");
    SP -= items;
    {
	dSpaceID        space = SvROK(ST(0))
            ? (dSpaceID) SvIV(SvRV(ST(0))) : NULL;
	int	min;
	int	max;

	if (items >= 2) {
	    min = (int)SvIV(ST(1));
	}

	if (items >= 3) {
	    max = (int)SvIV(ST(2));
	}
#line 1278 "ODE.xs"
        if (items == 3) {
            dHashSpaceSetLevels(space, min, max);
        }
        else if (items == 1) {
            dHashSpaceGetLevels(space, &min, &max);
        }
        else {
            croak("levels: Usage: levels(space, [min, max])");
        }
        EXTEND(SP, 2);
        PUSHs(sv_2mortal(newSViv(min)));
        PUSHs(sv_2mortal(newSViv(max)));
#line 2926 "ODE.c"
	PUTBACK;
	return;
    }
}

XS(XS_ODE__Geom__Space__QuadTree__make); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom__Space__QuadTree__make)
{
    dXSARGS;
    if (items != 4)
	Perl_croak(aTHX_ "Usage: ODE::Geom::Space::QuadTree::_make(parent, center, ext, depth)");
    {
	dSpaceID        parent = SvROK(ST(0))
            ? (dSpaceID) SvIV(SvRV(ST(0))) : NULL;
	dV	center;
	dV	ext;
	int	depth = (int)SvIV(ST(3));
#line 1299 "ODE.xs"
        dSpaceID space;
#line 2946 "ODE.c"
	dSpaceID_NEW	RETVAL;

        if (sv_isa(ST(1), "ODE::Vector")) {
            center = (dV)SvPV_nolen(SvRV(ST(1)));
        }
        else {
            Perl_croak(aTHX_ "center is not of type dV");
        };

        if (sv_isa(ST(2), "ODE::Vector")) {
            ext = (dV)SvPV_nolen(SvRV(ST(2)));
        }
        else {
            Perl_croak(aTHX_ "ext is not of type dV");
        };
#line 1301 "ODE.xs"
        RETVAL = dQuadTreeSpaceCreate(parent, center, ext, depth);
        dSpaceSetCleanup(RETVAL, 0);
#line 2965 "ODE.c"
	ST(0) = sv_newmortal();
        if (RETVAL) {
            dGeomSetData((dGeomID)RETVAL, (void*)newSViv((IV)RETVAL));
            ST(0) = _get_geom_sv((dGeomID)RETVAL);
        }
    }
    XSRETURN(1);
}

XS(XS_ODE__Geom__Sphere__make); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom__Sphere__make)
{
    dXSARGS;
    if (items != 2)
	Perl_croak(aTHX_ "Usage: ODE::Geom::Sphere::_make(parent, radius)");
    {
	dSpaceID        parent = SvROK(ST(0))
            ? (dSpaceID) SvIV(SvRV(ST(0))) : NULL;
	double	radius = (double)SvNV(ST(1));
	dGeomID_NEW	RETVAL;
#line 1312 "ODE.xs"
        RETVAL = dCreateSphere(parent, radius);
#line 2988 "ODE.c"
	ST(0) = sv_newmortal();
        if (RETVAL) {
            dGeomSetData((dGeomID)RETVAL, (void*)newSViv((IV)RETVAL));
            ST(0) = _get_geom_sv((dGeomID)RETVAL);
        }
    }
    XSRETURN(1);
}

XS(XS_ODE__Geom__Sphere_radius); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom__Sphere_radius)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Geom::Sphere::radius(geom, newrad = NO_INIT)");
    {
	dGeomID        geom = SvROK(ST(0))
            ? (dGeomID) SvIV(SvRV(ST(0))) : NULL;
	double	newrad;
	double	RETVAL;
	dXSTARG;

	if (items >= 2) {
	    newrad = (double)SvNV(ST(1));
	}
#line 1320 "ODE.xs"
        if (items == 2) {
            dGeomSphereSetRadius(geom, newrad);
            RETVAL = newrad;
        }
        else {
            RETVAL = dGeomSphereGetRadius(geom);
        }
#line 3022 "ODE.c"
	XSprePUSH; PUSHn((double)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Geom__Sphere_depth); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom__Sphere_depth)
{
    dXSARGS;
    if (items != 2)
	Perl_croak(aTHX_ "Usage: ODE::Geom::Sphere::depth(geom, point)");
    {
	dGeomID        geom = SvROK(ST(0))
            ? (dGeomID) SvIV(SvRV(ST(0))) : NULL;
	dV	point;
	double	RETVAL;
	dXSTARG;

        if (sv_isa(ST(1), "ODE::Vector")) {
            point = (dV)SvPV_nolen(SvRV(ST(1)));
        }
        else {
            Perl_croak(aTHX_ "point is not of type dV");
        };
#line 1334 "ODE.xs"
        RETVAL = dGeomSpherePointDepth(geom, point[0], point[1], point[2]);
#line 3049 "ODE.c"
	XSprePUSH; PUSHn((double)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Geom__Box__make); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom__Box__make)
{
    dXSARGS;
    if (items != 2)
	Perl_croak(aTHX_ "Usage: ODE::Geom::Box::_make(parent, dims)");
    {
	dSpaceID        parent = SvROK(ST(0))
            ? (dSpaceID) SvIV(SvRV(ST(0))) : NULL;
	dV	dims;
	dGeomID_NEW	RETVAL;

        if (sv_isa(ST(1), "ODE::Vector")) {
            dims = (dV)SvPV_nolen(SvRV(ST(1)));
        }
        else {
            Perl_croak(aTHX_ "dims is not of type dV");
        };
#line 1344 "ODE.xs"
        RETVAL = dCreateBox(parent, dims[0], dims[1], dims[2]);
#line 3075 "ODE.c"
	ST(0) = sv_newmortal();
        if (RETVAL) {
            dGeomSetData((dGeomID)RETVAL, (void*)newSViv((IV)RETVAL));
            ST(0) = _get_geom_sv((dGeomID)RETVAL);
        }
    }
    XSRETURN(1);
}

XS(XS_ODE__Geom__Box_sides); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom__Box_sides)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Geom::Box::sides(inv, vec = NO_INIT)");
    {
	dGeomID        inv = SvROK(ST(0))
            ? (dGeomID) SvIV(SvRV(ST(0))) : NULL;
	dV	vec;
#line 1352 "ODE.xs"
        dVector3 result;
#line 3097 "ODE.c"
	dV	RETVAL;

	if (items >= 2) {
	if (sv_isa(ST(1), "ODE::Vector")) {
	    vec = (dV)SvPV_nolen(SvRV(ST(1)));
	}
	else {
	    Perl_croak(aTHX_ "vec is not of type dV");
	};
	}
#line 1354 "ODE.xs"
        if (items == 2) {
            dGeomBoxSetLengths(inv, vec[0], vec[1], vec[2]);
            RETVAL = vec;
        }
        else {
            dGeomBoxGetLengths(inv, result);
            RETVAL = result;
        }
#line 3117 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Vector", (void*)RETVAL, sizeof(dVector3));
    }
    XSRETURN(1);
}

XS(XS_ODE__Geom__Box_depth); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom__Box_depth)
{
    dXSARGS;
    if (items != 2)
	Perl_croak(aTHX_ "Usage: ODE::Geom::Box::depth(geom, point)");
    {
	dGeomID        geom = SvROK(ST(0))
            ? (dGeomID) SvIV(SvRV(ST(0))) : NULL;
	dV	point;
	double	RETVAL;
	dXSTARG;

        if (sv_isa(ST(1), "ODE::Vector")) {
            point = (dV)SvPV_nolen(SvRV(ST(1)));
        }
        else {
            Perl_croak(aTHX_ "point is not of type dV");
        };
#line 1369 "ODE.xs"
        RETVAL = dGeomBoxPointDepth(geom, point[0], point[1], point[2]);
#line 3145 "ODE.c"
	XSprePUSH; PUSHn((double)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Geom__Plane__make); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom__Plane__make)
{
    dXSARGS;
    if (items != 3)
	Perl_croak(aTHX_ "Usage: ODE::Geom::Plane::_make(parent, normal, param)");
    {
	dSpaceID        parent = SvROK(ST(0))
            ? (dSpaceID) SvIV(SvRV(ST(0))) : NULL;
	dV	normal;
	double	param = (double)SvNV(ST(2));
	dGeomID_NEW	RETVAL;

        if (sv_isa(ST(1), "ODE::Vector")) {
            normal = (dV)SvPV_nolen(SvRV(ST(1)));
        }
        else {
            Perl_croak(aTHX_ "normal is not of type dV");
        };
#line 1380 "ODE.xs"
        RETVAL = dCreatePlane(parent, normal[0], normal[1], normal[2], param);
#line 3172 "ODE.c"
	ST(0) = sv_newmortal();
        if (RETVAL) {
            dGeomSetData((dGeomID)RETVAL, (void*)newSViv((IV)RETVAL));
            ST(0) = _get_geom_sv((dGeomID)RETVAL);
        }
    }
    XSRETURN(1);
}

XS(XS_ODE__Geom__Plane_normal_param); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom__Plane_normal_param)
{
    dXSARGS;
    if (items < 1 || items > 3)
	Perl_croak(aTHX_ "Usage: ODE::Geom::Plane::normal_param(geom, normal = NO_INIT, param = NO_INIT)");
    SP -= items;
    {
	dGeomID        geom = SvROK(ST(0))
            ? (dGeomID) SvIV(SvRV(ST(0))) : NULL;
	dV	normal;
	double	param;

	if (items >= 2) {
	if (sv_isa(ST(1), "ODE::Vector")) {
	    normal = (dV)SvPV_nolen(SvRV(ST(1)));
	}
	else {
	    Perl_croak(aTHX_ "normal is not of type dV");
	};
	}

	if (items >= 3) {
	    param = (double)SvNV(ST(2));
	}
#line 1389 "ODE.xs"
        EXTEND(SP, 2);
        if (items == 3) {
            SV* ret;
            dGeomPlaneSetParams(geom, normal[0], normal[1], normal[2], param);
            ret = sv_newmortal();
            sv_setref_pvn(ret, "ODE::Vector", (void*)normal, sizeof(dVector3));
            PUSHs(ret);
            PUSHs(sv_2mortal(newSVnv(param)));
        }
        else if (items == 1) {
            dVector4 grab;
            SV* ret;
            dGeomPlaneGetParams(geom, grab);
            ret = sv_newmortal();
            sv_setref_pvn(ret, "ODE::Vector", (void*)normal, sizeof(dVector3));
            PUSHs(ret);
            PUSHs(sv_2mortal(newSVnv(grab[3])));
        }
        else {
            croak("normal_param: Usage: normal_param([normal, param])");
        }
#line 3229 "ODE.c"
	PUTBACK;
	return;
    }
}

XS(XS_ODE__Geom__Plane_depth); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom__Plane_depth)
{
    dXSARGS;
    if (items != 2)
	Perl_croak(aTHX_ "Usage: ODE::Geom::Plane::depth(geom, point)");
    {
	dGeomID        geom = SvROK(ST(0))
            ? (dGeomID) SvIV(SvRV(ST(0))) : NULL;
	dV	point;
	double	RETVAL;
	dXSTARG;

        if (sv_isa(ST(1), "ODE::Vector")) {
            point = (dV)SvPV_nolen(SvRV(ST(1)));
        }
        else {
            Perl_croak(aTHX_ "point is not of type dV");
        };
#line 1415 "ODE.xs"
        RETVAL = dGeomPlanePointDepth(geom, point[0], point[1], point[2]);
#line 3256 "ODE.c"
	XSprePUSH; PUSHn((double)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Geom__CappedCylinder__make); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom__CappedCylinder__make)
{
    dXSARGS;
    if (items != 3)
	Perl_croak(aTHX_ "Usage: ODE::Geom::CappedCylinder::_make(parent, radius, length)");
    {
	dSpaceID        parent = SvROK(ST(0))
            ? (dSpaceID) SvIV(SvRV(ST(0))) : NULL;
	double	radius = (double)SvNV(ST(1));
	double	length = (double)SvNV(ST(2));
	dGeomID_NEW	RETVAL;
#line 1426 "ODE.xs"
        RETVAL = dCreateCCylinder(parent, radius, length);
#line 3276 "ODE.c"
	ST(0) = sv_newmortal();
        if (RETVAL) {
            dGeomSetData((dGeomID)RETVAL, (void*)newSViv((IV)RETVAL));
            ST(0) = _get_geom_sv((dGeomID)RETVAL);
        }
    }
    XSRETURN(1);
}

XS(XS_ODE__Geom__CappedCylinder_params); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom__CappedCylinder_params)
{
    dXSARGS;
    if (items < 1 || items > 3)
	Perl_croak(aTHX_ "Usage: ODE::Geom::CappedCylinder::params(geom, radius = NO_INIT, length = NO_INIT)");
    SP -= items;
    {
	dGeomID        geom = SvROK(ST(0))
            ? (dGeomID) SvIV(SvRV(ST(0))) : NULL;
	double	radius;
	double	length;

	if (items >= 2) {
	    radius = (double)SvNV(ST(1));
	}

	if (items >= 3) {
	    length = (double)SvNV(ST(2));
	}
#line 1435 "ODE.xs"
        if (items == 3) {
            dGeomCCylinderSetParams(geom, radius, length);
        }
        else if (items == 1) {
            dGeomCCylinderGetParams(geom, &radius, &length);
        }
        else {
            croak("params: Usage: params([radius, length])");
        }

        EXTEND(SP, 2);
        PUSHs(sv_2mortal(newSVnv(radius)));
        PUSHs(sv_2mortal(newSVnv(length)));
#line 3320 "ODE.c"
	PUTBACK;
	return;
    }
}

XS(XS_ODE__Geom__CappedCylinder_depth); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom__CappedCylinder_depth)
{
    dXSARGS;
    if (items != 2)
	Perl_croak(aTHX_ "Usage: ODE::Geom::CappedCylinder::depth(geom, point)");
    {
	dGeomID        geom = SvROK(ST(0))
            ? (dGeomID) SvIV(SvRV(ST(0))) : NULL;
	dV	point;
	double	RETVAL;
	dXSTARG;

        if (sv_isa(ST(1), "ODE::Vector")) {
            point = (dV)SvPV_nolen(SvRV(ST(1)));
        }
        else {
            Perl_croak(aTHX_ "point is not of type dV");
        };
#line 1453 "ODE.xs"
        RETVAL = dGeomCCylinderPointDepth(geom, point[0], point[1], point[2]);
#line 3347 "ODE.c"
	XSprePUSH; PUSHn((double)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Geom__Ray__make); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom__Ray__make)
{
    dXSARGS;
    if (items != 2)
	Perl_croak(aTHX_ "Usage: ODE::Geom::Ray::_make(parent, length)");
    {
	dSpaceID        parent = SvROK(ST(0))
            ? (dSpaceID) SvIV(SvRV(ST(0))) : NULL;
	double	length = (double)SvNV(ST(1));
	dGeomID_NEW	RETVAL;
#line 1465 "ODE.xs"
        RETVAL = dCreateRay(parent, length);
#line 3366 "ODE.c"
	ST(0) = sv_newmortal();
        if (RETVAL) {
            dGeomSetData((dGeomID)RETVAL, (void*)newSViv((IV)RETVAL));
            ST(0) = _get_geom_sv((dGeomID)RETVAL);
        }
    }
    XSRETURN(1);
}

XS(XS_ODE__Geom__Ray_length); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom__Ray_length)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Geom::Ray::length(geom, length = NO_INIT)");
    {
	dGeomID        geom = SvROK(ST(0))
            ? (dGeomID) SvIV(SvRV(ST(0))) : NULL;
	double	length;
	double	RETVAL;
	dXSTARG;

	if (items >= 2) {
	    length = (double)SvNV(ST(1));
	}
#line 1473 "ODE.xs"
        if (items == 2) {
            dGeomRaySetLength(geom, length);
            RETVAL = length;
        }
        else {
            RETVAL = dGeomRayGetLength(geom);
        }
#line 3400 "ODE.c"
	XSprePUSH; PUSHn((double)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Geom__Ray_orient); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom__Ray_orient)
{
    dXSARGS;
    if (items != 3)
	Perl_croak(aTHX_ "Usage: ODE::Geom::Ray::orient(geom, pos, dir)");
    {
	dGeomID        geom = SvROK(ST(0))
            ? (dGeomID) SvIV(SvRV(ST(0))) : NULL;
	dV	pos;
	dV	dir;

        if (sv_isa(ST(1), "ODE::Vector")) {
            pos = (dV)SvPV_nolen(SvRV(ST(1)));
        }
        else {
            Perl_croak(aTHX_ "pos is not of type dV");
        };

        if (sv_isa(ST(2), "ODE::Vector")) {
            dir = (dV)SvPV_nolen(SvRV(ST(2)));
        }
        else {
            Perl_croak(aTHX_ "dir is not of type dV");
        };
#line 1488 "ODE.xs"
        dGeomRaySet(geom, pos[0], pos[1], pos[2], dir[0], dir[1], dir[2]);
#line 3433 "ODE.c"
    }
    XSRETURN_EMPTY;
}

XS(XS_ODE__Geom__Ray_orientation); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom__Ray_orientation)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Geom::Ray::orientation(geom)");
    SP -= items;
    {
	dGeomID        geom = SvROK(ST(0))
            ? (dGeomID) SvIV(SvRV(ST(0))) : NULL;
#line 1493 "ODE.xs"
        dVector3 pos;
        dVector3 dir;
        SV* ret;
#line 3452 "ODE.c"
#line 1497 "ODE.xs"
        EXTEND(SP, 2);
        dGeomRayGet(geom, pos, dir);

        ret = sv_newmortal();
        sv_setref_pvn(ret, "ODE::Vector", (void*)pos, sizeof(dVector3));
        PUSHs(ret);

        ret = sv_newmortal();
        sv_setref_pvn(ret, "ODE::Vector", (void*)dir, sizeof(dVector3));
        PUSHs(ret);
#line 3464 "ODE.c"
	PUTBACK;
	return;
    }
}

XS(XS_ODE__Geom__Transform__make); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom__Transform__make)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Geom::Transform::_make(parent)");
    {
	dSpaceID        parent = SvROK(ST(0))
            ? (dSpaceID) SvIV(SvRV(ST(0))) : NULL;
	dGeomID_NEW	RETVAL;
#line 1515 "ODE.xs"
        RETVAL = dCreateGeomTransform(parent);
        dGeomTransformSetInfo(RETVAL, 1);  /* opaque */
#line 3483 "ODE.c"
	ST(0) = sv_newmortal();
        if (RETVAL) {
            dGeomSetData((dGeomID)RETVAL, (void*)newSViv((IV)RETVAL));
            ST(0) = _get_geom_sv((dGeomID)RETVAL);
        }
    }
    XSRETURN(1);
}

XS(XS_ODE__Geom__Transform_geom); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Geom__Transform_geom)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Geom::Transform::geom(geom, in = NO_INIT)");
    {
	dGeomID        geom = SvROK(ST(0))
            ? (dGeomID) SvIV(SvRV(ST(0))) : NULL;
	dGeomID	in;
	dGeomID	RETVAL;

	if (items >= 2) {
	in = SvROK(ST(1))
	    ? (dGeomID) SvIV(SvRV(ST(1))) : NULL;
	}
#line 1524 "ODE.xs"
        if (items == 2) {
            dGeomTransformSetGeom(geom, in);
            RETVAL = in;
        }
        else {
            RETVAL = dGeomTransformGetGeom(geom);
        }
#line 3517 "ODE.c"
	ST(0) = sv_newmortal();
        if (RETVAL) {
            ST(0) = _get_geom_sv((dGeomID)RETVAL);
        }
    }
    XSRETURN(1);
}

XS(XS_ODE__Vector__make); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Vector__make)
{
    dXSARGS;
    if (items != 3)
	Perl_croak(aTHX_ "Usage: ODE::Vector::_make(x, y, z)");
    {
	double	x = (double)SvNV(ST(0));
	double	y = (double)SvNV(ST(1));
	double	z = (double)SvNV(ST(2));
#line 1541 "ODE.xs"
        dVector3 v;
#line 3538 "ODE.c"
	dV	RETVAL;
#line 1543 "ODE.xs"
        v[0] = x;
        v[1] = y;
        v[2] = z;
        RETVAL = v;
#line 3545 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Vector", (void*)RETVAL, sizeof(dVector3));
    }
    XSRETURN(1);
}

XS(XS_ODE__Vector_clone); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Vector_clone)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Vector::clone(v)");
    {
	dV	v;
	dV	RETVAL;

        if (sv_isa(ST(0), "ODE::Vector")) {
            v = (dV)SvPV_nolen(SvRV(ST(0)));
        }
        else {
            Perl_croak(aTHX_ "v is not of type dV");
        };
#line 1553 "ODE.xs"
        RETVAL = v;
#line 3570 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Vector", (void*)RETVAL, sizeof(dVector3));
    }
    XSRETURN(1);
}

XS(XS_ODE__Vector_list); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Vector_list)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Vector::list(v)");
    SP -= items;
    {
	dV	v;

        if (sv_isa(ST(0), "ODE::Vector")) {
            v = (dV)SvPV_nolen(SvRV(ST(0)));
        }
        else {
            Perl_croak(aTHX_ "v is not of type dV");
        };
#line 1560 "ODE.xs"
        EXTEND(SP, 3);
        PUSHs(sv_2mortal(newSVnv(v[0])));
        PUSHs(sv_2mortal(newSVnv(v[1])));
        PUSHs(sv_2mortal(newSVnv(v[2])));
#line 3598 "ODE.c"
	PUTBACK;
	return;
    }
}

XS(XS_ODE__Vector_x); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Vector_x)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Vector::x(v)");
    {
	dV	v;
	double	RETVAL;
	dXSTARG;

        if (sv_isa(ST(0), "ODE::Vector")) {
            v = (dV)SvPV_nolen(SvRV(ST(0)));
        }
        else {
            Perl_croak(aTHX_ "v is not of type dV");
        };
#line 1568 "ODE.xs"
        RETVAL = v[0];
#line 3623 "ODE.c"
	XSprePUSH; PUSHn((double)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Vector_y); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Vector_y)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Vector::y(v)");
    {
	dV	v;
	double	RETVAL;
	dXSTARG;

        if (sv_isa(ST(0), "ODE::Vector")) {
            v = (dV)SvPV_nolen(SvRV(ST(0)));
        }
        else {
            Perl_croak(aTHX_ "v is not of type dV");
        };
#line 1575 "ODE.xs"
        RETVAL = v[1];
#line 3648 "ODE.c"
	XSprePUSH; PUSHn((double)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Vector_z); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Vector_z)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Vector::z(v)");
    {
	dV	v;
	double	RETVAL;
	dXSTARG;

        if (sv_isa(ST(0), "ODE::Vector")) {
            v = (dV)SvPV_nolen(SvRV(ST(0)));
        }
        else {
            Perl_croak(aTHX_ "v is not of type dV");
        };
#line 1582 "ODE.xs"
        RETVAL = v[2];
#line 3673 "ODE.c"
	XSprePUSH; PUSHn((double)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Vector_sum); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Vector_sum)
{
    dXSARGS;
    if (items < 2 || items > 3)
	Perl_croak(aTHX_ "Usage: ODE::Vector::sum(u, v, dummy = NO_INIT)");
    {
	dV	u;
	dV	v;
	int	dummy;
#line 1591 "ODE.xs"
        dVector3 ret;
#line 3691 "ODE.c"
	dV	RETVAL;

        if (sv_isa(ST(0), "ODE::Vector")) {
            u = (dV)SvPV_nolen(SvRV(ST(0)));
        }
        else {
            Perl_croak(aTHX_ "u is not of type dV");
        };

        if (sv_isa(ST(1), "ODE::Vector")) {
            v = (dV)SvPV_nolen(SvRV(ST(1)));
        }
        else {
            Perl_croak(aTHX_ "v is not of type dV");
        };

	if (items >= 3) {
	    dummy = (int)SvIV(ST(2));
	}
#line 1593 "ODE.xs"
        ret[0] = u[0] + v[0];
        ret[1] = u[1] + v[1];
        ret[2] = u[2] + v[2];
        RETVAL = ret;
#line 3716 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Vector", (void*)RETVAL, sizeof(dVector3));
    }
    XSRETURN(1);
}

XS(XS_ODE__Vector_neg); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Vector_neg)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Vector::neg(u)");
    {
	dV	u;
#line 1603 "ODE.xs"
        dVector3 ret;
#line 3733 "ODE.c"
	dV	RETVAL;

        if (sv_isa(ST(0), "ODE::Vector")) {
            u = (dV)SvPV_nolen(SvRV(ST(0)));
        }
        else {
            Perl_croak(aTHX_ "u is not of type dV");
        };
#line 1605 "ODE.xs"
        ret[0] = -u[0];
        ret[1] = -u[1];
        ret[2] = -u[2];
        RETVAL = ret;
#line 3747 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Vector", (void*)RETVAL, sizeof(dVector3));
    }
    XSRETURN(1);
}

XS(XS_ODE__Vector_scale); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Vector_scale)
{
    dXSARGS;
    if (items < 2 || items > 3)
	Perl_croak(aTHX_ "Usage: ODE::Vector::scale(u, n, dummy = NO_INIT)");
    {
	dV	u;
	double	n = (double)SvNV(ST(1));
	int	dummy;
#line 1617 "ODE.xs"
        dVector3 ret;
#line 3766 "ODE.c"
	dV	RETVAL;

        if (sv_isa(ST(0), "ODE::Vector")) {
            u = (dV)SvPV_nolen(SvRV(ST(0)));
        }
        else {
            Perl_croak(aTHX_ "u is not of type dV");
        };

	if (items >= 3) {
	    dummy = (int)SvIV(ST(2));
	}
#line 1619 "ODE.xs"
        ret[0] = u[0] * n;
        ret[1] = u[1] * n;
        ret[2] = u[2] * n;
        RETVAL = ret;
#line 3784 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Vector", (void*)RETVAL, sizeof(dVector3));
    }
    XSRETURN(1);
}

XS(XS_ODE__Vector_dot); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Vector_dot)
{
    dXSARGS;
    if (items < 2 || items > 3)
	Perl_croak(aTHX_ "Usage: ODE::Vector::dot(u, v, dummy = NO_INIT)");
    {
	dV	u;
	dV	v;
	int	dummy;
	double	RETVAL;
	dXSTARG;

        if (sv_isa(ST(0), "ODE::Vector")) {
            u = (dV)SvPV_nolen(SvRV(ST(0)));
        }
        else {
            Perl_croak(aTHX_ "u is not of type dV");
        };

        if (sv_isa(ST(1), "ODE::Vector")) {
            v = (dV)SvPV_nolen(SvRV(ST(1)));
        }
        else {
            Perl_croak(aTHX_ "v is not of type dV");
        };

	if (items >= 3) {
	    dummy = (int)SvIV(ST(2));
	}
#line 1631 "ODE.xs"
        RETVAL = u[0] * v[0] + u[1] * v[1] + u[2] * v[2];
#line 3823 "ODE.c"
	XSprePUSH; PUSHn((double)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Vector_cross); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Vector_cross)
{
    dXSARGS;
    if (items < 2 || items > 3)
	Perl_croak(aTHX_ "Usage: ODE::Vector::cross(u, v, dummy = NO_INIT)");
    {
	dV	u;
	dV	v;
	int	dummy;
#line 1640 "ODE.xs"
        dVector3 ret;
#line 3841 "ODE.c"
	dV	RETVAL;

        if (sv_isa(ST(0), "ODE::Vector")) {
            u = (dV)SvPV_nolen(SvRV(ST(0)));
        }
        else {
            Perl_croak(aTHX_ "u is not of type dV");
        };

        if (sv_isa(ST(1), "ODE::Vector")) {
            v = (dV)SvPV_nolen(SvRV(ST(1)));
        }
        else {
            Perl_croak(aTHX_ "v is not of type dV");
        };

	if (items >= 3) {
	    dummy = (int)SvIV(ST(2));
	}
#line 1642 "ODE.xs"
        ret[0] = u[1] * v[2] - u[2] * v[1];
        ret[1] = u[2] * v[0] - u[0] * v[2];
        ret[2] = u[0] * v[1] - u[1] * v[0];
        RETVAL = ret;
#line 3866 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Vector", (void*)RETVAL, sizeof(dVector3));
    }
    XSRETURN(1);
}

XS(XS_ODE__Vector_norm); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Vector_norm)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Vector::norm(u)");
    {
	dV	u;
	double	RETVAL;
	dXSTARG;

        if (sv_isa(ST(0), "ODE::Vector")) {
            u = (dV)SvPV_nolen(SvRV(ST(0)));
        }
        else {
            Perl_croak(aTHX_ "u is not of type dV");
        };
#line 1652 "ODE.xs"
        RETVAL = sqrt(u[0]*u[0] + u[1]*u[1] + u[2]*u[2]);
#line 3892 "ODE.c"
	XSprePUSH; PUSHn((double)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Vector_unit); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Vector_unit)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Vector::unit(u)");
    {
	dV	u;
#line 1659 "ODE.xs"
        double norm;
        dVector3 v;
#line 3909 "ODE.c"
	dV	RETVAL;

        if (sv_isa(ST(0), "ODE::Vector")) {
            u = (dV)SvPV_nolen(SvRV(ST(0)));
        }
        else {
            Perl_croak(aTHX_ "u is not of type dV");
        };
#line 1662 "ODE.xs"
        norm = sqrt(u[0]*u[0] + u[1]*u[1] + u[2]*u[2]);
        if (norm > INFINITESIMAL) {
            v[0] = u[0] / norm;
            v[1] = u[1] / norm;
            v[2] = u[2] / norm;
        }
        else {
            v[0] = v[1] = v[2] = 0;
        }
        RETVAL = v;
#line 3929 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Vector", (void*)RETVAL, sizeof(dVector3));
    }
    XSRETURN(1);
}

XS(XS_ODE__Vector_equals); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Vector_equals)
{
    dXSARGS;
    if (items < 2 || items > 3)
	Perl_croak(aTHX_ "Usage: ODE::Vector::equals(u, v, dummy = NO_INIT)");
    {
	dV	u;
	dV	v;
	int	dummy;
	int	RETVAL;
	dXSTARG;

        if (sv_isa(ST(0), "ODE::Vector")) {
            u = (dV)SvPV_nolen(SvRV(ST(0)));
        }
        else {
            Perl_croak(aTHX_ "u is not of type dV");
        };

        if (sv_isa(ST(1), "ODE::Vector")) {
            v = (dV)SvPV_nolen(SvRV(ST(1)));
        }
        else {
            Perl_croak(aTHX_ "v is not of type dV");
        };

	if (items >= 3) {
	    dummy = (int)SvIV(ST(2));
	}
#line 1680 "ODE.xs"
        RETVAL = fabs(u[0] - v[0]) < INFINITESIMAL
              && fabs(u[1] - v[1]) < INFINITESIMAL
              && fabs(u[2] - v[2]) < INFINITESIMAL;
#line 3970 "ODE.c"
	XSprePUSH; PUSHi((IV)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Quaternion__make_identity); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Quaternion__make_identity)
{
    dXSARGS;
    if (items != 0)
	Perl_croak(aTHX_ "Usage: ODE::Quaternion::_make_identity()");
    {
#line 1690 "ODE.xs"
        dQuaternion q;
#line 3985 "ODE.c"
	dQ	RETVAL;
#line 1692 "ODE.xs"
        dQSetIdentity(q);
        RETVAL = q;
#line 3990 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Quaternion", (void*)RETVAL, sizeof(dQuaternion));
    }
    XSRETURN(1);
}

XS(XS_ODE__Quaternion__make_angle_axis); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Quaternion__make_angle_axis)
{
    dXSARGS;
    if (items != 2)
	Perl_croak(aTHX_ "Usage: ODE::Quaternion::_make_angle_axis(angle, axis)");
    {
	double	angle = (double)SvNV(ST(0));
	dV	axis;
#line 1701 "ODE.xs"
        dQuaternion q;
#line 4008 "ODE.c"
	dQ	RETVAL;

        if (sv_isa(ST(1), "ODE::Vector")) {
            axis = (dV)SvPV_nolen(SvRV(ST(1)));
        }
        else {
            Perl_croak(aTHX_ "axis is not of type dV");
        };
#line 1703 "ODE.xs"
        dQFromAxisAndAngle(q, axis[0], axis[1], axis[2], angle);
        RETVAL = q;
#line 4020 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Quaternion", (void*)RETVAL, sizeof(dQuaternion));
    }
    XSRETURN(1);
}

XS(XS_ODE__Quaternion__make_direct); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Quaternion__make_direct)
{
    dXSARGS;
    if (items != 4)
	Perl_croak(aTHX_ "Usage: ODE::Quaternion::_make_direct(a, b, c, d)");
    {
	double	a = (double)SvNV(ST(0));
	double	b = (double)SvNV(ST(1));
	double	c = (double)SvNV(ST(2));
	double	d = (double)SvNV(ST(3));
#line 1714 "ODE.xs"
        dQuaternion q;
        double len;
#line 4041 "ODE.c"
	dQ	RETVAL;
#line 1717 "ODE.xs"
        len = sqrt(a*a + b*b + c*c + d*d);
        q[0] = a / len;
        q[1] = b / len;
        q[2] = c / len;
        q[3] = d / len;
        RETVAL = q;
#line 4050 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Quaternion", (void*)RETVAL, sizeof(dQuaternion));
    }
    XSRETURN(1);
}

XS(XS_ODE__Quaternion_list); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Quaternion_list)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Quaternion::list(v)");
    SP -= items;
    {
	dQ	v;

        if (sv_isa(ST(0), "ODE::Quaternion")) {
            v = (dQ)SvPV_nolen(SvRV(ST(0)));
        }
        else {
            Perl_croak(aTHX_ "v is not of type dQ");
        };
#line 1729 "ODE.xs"
        EXTEND(SP, 4);
        PUSHs(sv_2mortal(newSVnv(v[0])));
        PUSHs(sv_2mortal(newSVnv(v[1])));
        PUSHs(sv_2mortal(newSVnv(v[2])));
        PUSHs(sv_2mortal(newSVnv(v[3])));
#line 4079 "ODE.c"
	PUTBACK;
	return;
    }
}

XS(XS_ODE__Quaternion_clone); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Quaternion_clone)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Quaternion::clone(q)");
    {
	dQ	q;
	dQ	RETVAL;

        if (sv_isa(ST(0), "ODE::Quaternion")) {
            q = (dQ)SvPV_nolen(SvRV(ST(0)));
        }
        else {
            Perl_croak(aTHX_ "q is not of type dQ");
        };
#line 1738 "ODE.xs"
        RETVAL = q;
#line 4103 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Quaternion", (void*)RETVAL, sizeof(dQuaternion));
    }
    XSRETURN(1);
}

XS(XS_ODE__Quaternion_angle); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Quaternion_angle)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Quaternion::angle(q)");
    {
	dQ	q;
	double	RETVAL;
	dXSTARG;

        if (sv_isa(ST(0), "ODE::Quaternion")) {
            q = (dQ)SvPV_nolen(SvRV(ST(0)));
        }
        else {
            Perl_croak(aTHX_ "q is not of type dQ");
        };
#line 1745 "ODE.xs"
        RETVAL = 2 * acos(q[0]);
#line 4129 "ODE.c"
	XSprePUSH; PUSHn((double)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Quaternion_axis); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Quaternion_axis)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Quaternion::axis(q)");
    {
	dQ	q;
#line 1752 "ODE.xs"
        dVector3 v;
        double sina;
#line 4146 "ODE.c"
	dV	RETVAL;

        if (sv_isa(ST(0), "ODE::Quaternion")) {
            q = (dQ)SvPV_nolen(SvRV(ST(0)));
        }
        else {
            Perl_croak(aTHX_ "q is not of type dQ");
        };
#line 1755 "ODE.xs"
        sina = sqrt(1.0 - q[0] * q[0]);
        if (fabs(sina) < 0.0005) { /* Don't divide by almost-0 */
            sina = 1;
        }
        v[0] = q[1] / sina;
        v[1] = q[2] / sina;
        v[2] = q[3] / sina;
        RETVAL = v;
#line 4164 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Vector", (void*)RETVAL, sizeof(dVector3));
    }
    XSRETURN(1);
}

XS(XS_ODE__Quaternion_inverse); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Quaternion_inverse)
{
    dXSARGS;
    if (items != 1)
	Perl_croak(aTHX_ "Usage: ODE::Quaternion::inverse(q)");
    {
	dQ	q;
#line 1769 "ODE.xs"
        dQuaternion r;
#line 4181 "ODE.c"
	dQ	RETVAL;

        if (sv_isa(ST(0), "ODE::Quaternion")) {
            q = (dQ)SvPV_nolen(SvRV(ST(0)));
        }
        else {
            Perl_croak(aTHX_ "q is not of type dQ");
        };
#line 1771 "ODE.xs"
        r[0] = q[0];
        r[1] = -q[1];
        r[2] = -q[2];
        r[3] = -q[3];
        RETVAL = r;
#line 4196 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Quaternion", (void*)RETVAL, sizeof(dQuaternion));
    }
    XSRETURN(1);
}

XS(XS_ODE__Quaternion_prod); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Quaternion_prod)
{
    dXSARGS;
    if (items < 2 || items > 3)
	Perl_croak(aTHX_ "Usage: ODE::Quaternion::prod(q, r, swap = 0)");
    {
	dQ	q;
	dQ	r;
	int	swap;
#line 1784 "ODE.xs"
        dQuaternion s;
#line 4215 "ODE.c"
	dQ	RETVAL;

        if (sv_isa(ST(0), "ODE::Quaternion")) {
            q = (dQ)SvPV_nolen(SvRV(ST(0)));
        }
        else {
            Perl_croak(aTHX_ "q is not of type dQ");
        };

        if (sv_isa(ST(1), "ODE::Quaternion")) {
            r = (dQ)SvPV_nolen(SvRV(ST(1)));
        }
        else {
            Perl_croak(aTHX_ "r is not of type dQ");
        };

	if (items < 3)
	    swap = 0;
	else {
	    swap = (int)SvIV(ST(2));
	}
#line 1786 "ODE.xs"
        if (swap)
            dQMultiply0(s, r, q);
        else
            dQMultiply0(s, q, r);
        RETVAL = s;
#line 4243 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Quaternion", (void*)RETVAL, sizeof(dQuaternion));
    }
    XSRETURN(1);
}

XS(XS_ODE__Mass__make); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Mass__make)
{
    dXSARGS;
    if (items != 0)
	Perl_croak(aTHX_ "Usage: ODE::Mass::_make()");
    {
#line 1798 "ODE.xs"
        dMass m;
#line 4259 "ODE.c"
	dMass *	RETVAL;
#line 1800 "ODE.xs"
        dMassSetZero(&m);
        RETVAL = &m;
#line 4264 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Mass", (void*)RETVAL, sizeof(dMass));
    }
    XSRETURN(1);
}

XS(XS_ODE__Mass_mass); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Mass_mass)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Mass::mass(m, in = NO_INIT)");
    {
	dMass*	m;
	double	in;
	double	RETVAL;
	dXSTARG;

        if (sv_isa(ST(0), "ODE::Mass")) {
            m = (dMass *)SvPV_nolen(SvRV(ST(0)));
        }
        else {
            Perl_croak(aTHX_ "m is not of type dMassPtr");
        };

	if (items >= 2) {
	    in = (double)SvNV(ST(1));
	}
#line 1809 "ODE.xs"
        if (items == 2) {
            m->mass = in;
        }
        RETVAL = m->mass;
#line 4298 "ODE.c"
	XSprePUSH; PUSHn((double)RETVAL);
    }
    XSRETURN(1);
}

XS(XS_ODE__Mass_center_of_gravity); /* prototype to pass -Wmissing-prototypes */
XS(XS_ODE__Mass_center_of_gravity)
{
    dXSARGS;
    if (items < 1 || items > 2)
	Perl_croak(aTHX_ "Usage: ODE::Mass::center_of_gravity(m, in = NO_INIT)");
    {
	dMass*	m;
	dV	in;
	dV	RETVAL;

        if (sv_isa(ST(0), "ODE::Mass")) {
            m = (dMass *)SvPV_nolen(SvRV(ST(0)));
        }
        else {
            Perl_croak(aTHX_ "m is not of type dMassPtr");
        };

	if (items >= 2) {
	if (sv_isa(ST(1), "ODE::Vector")) {
	    in = (dV)SvPV_nolen(SvRV(ST(1)));
	}
	else {
	    Perl_croak(aTHX_ "in is not of type dV");
	};
	}
#line 1820 "ODE.xs"
        if (items == 2) {
            memcpy(m->c, in, sizeof(dVector3));
        }
        RETVAL = m->c;
#line 4335 "ODE.c"
	ST(0) = sv_newmortal();
        sv_setref_pvn(ST(0), "ODE::Vector", (void*)RETVAL, sizeof(dVector3));
    }
    XSRETURN(1);
}

#ifdef __cplusplus
extern "C"
#endif
XS(boot_ODE); /* prototype to pass -Wmissing-prototypes */
XS(boot_ODE)
{
    dXSARGS;
    char* file = __FILE__;

    XS_VERSION_BOOTCHECK ;

        newXS("ODE::constant", XS_ODE_constant, file);
        newXSproto("ODE::_close_ode", XS_ODE__close_ode, file, "");
        newXSproto("ODE::World::_make", XS_ODE__World__make, file, "");
        newXSproto("ODE::World::_destroy", XS_ODE__World__destroy, file, "$");
        newXSproto("ODE::World::gravity", XS_ODE__World_gravity, file, "$;$");
        newXSproto("ODE::World::ERP", XS_ODE__World_ERP, file, "$;$");
        newXSproto("ODE::World::CFM", XS_ODE__World_CFM, file, "$$");
        newXSproto("ODE::World::step", XS_ODE__World_step, file, "$$");
        newXSproto("ODE::World::quickstep", XS_ODE__World_quickstep, file, "$$");
        newXSproto("ODE::World::new_body", XS_ODE__World_new_body, file, "$");
        newXSproto("ODE::Body::destroy", XS_ODE__Body_destroy, file, "$");
        newXSproto("ODE::Body::position", XS_ODE__Body_position, file, "$;$");
        newXSproto("ODE::Body::rotation", XS_ODE__Body_rotation, file, "$;$");
        newXSproto("ODE::Body::velocity", XS_ODE__Body_velocity, file, "$;$");
        newXSproto("ODE::Body::angular_velocity", XS_ODE__Body_angular_velocity, file, "$;$");
        newXSproto("ODE::Body::mass", XS_ODE__Body_mass, file, "$;$");
        newXSproto("ODE::Body::add_force", XS_ODE__Body_add_force, file, "$$;$");
        newXSproto("ODE::Body::add_torque", XS_ODE__Body_add_torque, file, "$$");
        newXSproto("ODE::Body::force_accumulator", XS_ODE__Body_force_accumulator, file, "$;$");
        newXSproto("ODE::Body::torque_accumulator", XS_ODE__Body_torque_accumulator, file, "$;$");
        newXSproto("ODE::Body::enabled", XS_ODE__Body_enabled, file, "$;$");
        newXSproto("ODE::Body::finite_rotation_mode", XS_ODE__Body_finite_rotation_mode, file, "$;$");
        newXSproto("ODE::Body::joints", XS_ODE__Body_joints, file, "$");
        newXSproto("ODE::Body::gravity_mode", XS_ODE__Body_gravity_mode, file, "$;$");
        newXSproto("ODE::JointGroup::_make", XS_ODE__JointGroup__make, file, "");
        newXSproto("ODE::JointGroup::empty", XS_ODE__JointGroup_empty, file, "$");
        newXSproto("ODE::JointGroup::_destroy", XS_ODE__JointGroup__destroy, file, "$");
        newXSproto("ODE::Joint::destroy", XS_ODE__Joint_destroy, file, "$");
        newXSproto("ODE::Joint::_destroy", XS_ODE__Joint__destroy, file, "$");
        newXSproto("ODE::Joint::attach", XS_ODE__Joint_attach, file, "$$$");
        newXSproto("ODE::Joint::Ball::_make", XS_ODE__Joint__Ball__make, file, "$;$");
        newXSproto("ODE::Joint::Ball::anchor", XS_ODE__Joint__Ball_anchor, file, "$;$");
        newXSproto("ODE::Joint::Hinge::_make", XS_ODE__Joint__Hinge__make, file, "$;$");
        newXSproto("ODE::Joint::Hinge::anchor", XS_ODE__Joint__Hinge_anchor, file, "$;$");
        newXSproto("ODE::Joint::Hinge::axis", XS_ODE__Joint__Hinge_axis, file, "$;$");
        newXSproto("ODE::Joint::Hinge::angle", XS_ODE__Joint__Hinge_angle, file, "$");
        newXSproto("ODE::Joint::Hinge::angle_rate", XS_ODE__Joint__Hinge_angle_rate, file, "$");
        newXSproto("ODE::Joint::Hinge::_param", XS_ODE__Joint__Hinge__param, file, "$$;$");
        newXSproto("ODE::Joint::Slider::_make", XS_ODE__Joint__Slider__make, file, "$;$");
        newXSproto("ODE::Joint::Slider::axis", XS_ODE__Joint__Slider_axis, file, "$;$");
        newXSproto("ODE::Joint::Slider::extension", XS_ODE__Joint__Slider_extension, file, "$");
        newXSproto("ODE::Joint::Slider::extension_rate", XS_ODE__Joint__Slider_extension_rate, file, "$");
        newXSproto("ODE::Joint::Slider::_param", XS_ODE__Joint__Slider__param, file, "$$;$");
        newXSproto("ODE::Joint::Contact::_make", XS_ODE__Joint__Contact__make, file, "$$;$");
        newXSproto("ODE::Joint::Universal::_make", XS_ODE__Joint__Universal__make, file, "$;$");
        newXSproto("ODE::Joint::Universal::anchor", XS_ODE__Joint__Universal_anchor, file, "$;$");
        newXSproto("ODE::Joint::Universal::axis1", XS_ODE__Joint__Universal_axis1, file, "$;$");
        newXSproto("ODE::Joint::Universal::axis2", XS_ODE__Joint__Universal_axis2, file, "$;$");
        newXSproto("ODE::Joint::Universal::_param", XS_ODE__Joint__Universal__param, file, "$$;$");
        newXSproto("ODE::Joint::DoubleHinge::_make", XS_ODE__Joint__DoubleHinge__make, file, "$;$");
        newXSproto("ODE::Joint::DoubleHinge::anchor", XS_ODE__Joint__DoubleHinge_anchor, file, "$;$");
        newXSproto("ODE::Joint::DoubleHinge::axis1", XS_ODE__Joint__DoubleHinge_axis1, file, "$;$");
        newXSproto("ODE::Joint::DoubleHinge::axis2", XS_ODE__Joint__DoubleHinge_axis2, file, "$;$");
        newXSproto("ODE::Joint::DoubleHinge::angle1", XS_ODE__Joint__DoubleHinge_angle1, file, "$");
        newXSproto("ODE::Joint::DoubleHinge::angle1_rate", XS_ODE__Joint__DoubleHinge_angle1_rate, file, "$");
        newXSproto("ODE::Joint::DoubleHinge::angle2_rate", XS_ODE__Joint__DoubleHinge_angle2_rate, file, "$");
        newXSproto("ODE::Joint::DoubleHinge::_param", XS_ODE__Joint__DoubleHinge__param, file, "$$;$");
        newXSproto("ODE::Joint::Fixed::_make", XS_ODE__Joint__Fixed__make, file, "$;$");
        newXSproto("ODE::Joint::Fixed::reset", XS_ODE__Joint__Fixed_reset, file, "$");
        newXSproto("ODE::Joint::AngularMotor::_make", XS_ODE__Joint__AngularMotor__make, file, "$;$");
        newXSproto("ODE::Joint::AngularMotor::num_axes", XS_ODE__Joint__AngularMotor_num_axes, file, "$;$");
        newXSproto("ODE::Joint::AngularMotor::axis", XS_ODE__Joint__AngularMotor_axis, file, "$$;$$");
        newXSproto("ODE::Joint::AngularMotor::angle", XS_ODE__Joint__AngularMotor_angle, file, "$$;$");
        newXSproto("ODE::Joint::AngularMotor::angle_rate", XS_ODE__Joint__AngularMotor_angle_rate, file, "$$");
        newXSproto("ODE::Joint::AngularMotor::_param", XS_ODE__Joint__AngularMotor__param, file, "$$;$");
        newXSproto("ODE::Joint::Plane2D::_make", XS_ODE__Joint__Plane2D__make, file, "$;$");
        newXSproto("ODE::Joint::Plane2D::_param", XS_ODE__Joint__Plane2D__param, file, "$$;$");
        newXSproto("ODE::ContactGeom::pos", XS_ODE__ContactGeom_pos, file, "$");
        newXSproto("ODE::ContactGeom::normal", XS_ODE__ContactGeom_normal, file, "$");
        newXSproto("ODE::ContactGeom::depth", XS_ODE__ContactGeom_depth, file, "$");
        newXSproto("ODE::ContactGeom::g1", XS_ODE__ContactGeom_g1, file, "$");
        newXSproto("ODE::ContactGeom::g2", XS_ODE__ContactGeom_g2, file, "$");
        newXSproto("ODE::Geom::destroy", XS_ODE__Geom_destroy, file, "$");
        newXSproto("ODE::Geom::body", XS_ODE__Geom_body, file, "$;$");
        newXSproto("ODE::Geom::position", XS_ODE__Geom_position, file, "$;$");
        newXSproto("ODE::Geom::rotation", XS_ODE__Geom_rotation, file, "$;$");
        newXSproto("ODE::Geom::aabb", XS_ODE__Geom_aabb, file, "$");
        newXSproto("ODE::Geom::is_space", XS_ODE__Geom_is_space, file, "$");
        newXSproto("ODE::Geom::space", XS_ODE__Geom_space, file, "$");
        newXSproto("ODE::Geom::category_bits", XS_ODE__Geom_category_bits, file, "$;$");
        newXSproto("ODE::Geom::collide_bits", XS_ODE__Geom_collide_bits, file, "$;$");
        newXSproto("ODE::Geom::enable", XS_ODE__Geom_enable, file, "$");
        newXSproto("ODE::Geom::disable", XS_ODE__Geom_disable, file, "$");
        newXSproto("ODE::Geom::enabled", XS_ODE__Geom_enabled, file, "$");
        newXSproto("ODE::Geom::collide", XS_ODE__Geom_collide, file, "$$");
        newXSproto("ODE::Geom::multi_collide", XS_ODE__Geom_multi_collide, file, "$$$");
        newXSproto("ODE::Geom::Space::_destroy", XS_ODE__Geom__Space__destroy, file, "$");
        newXSproto("ODE::Geom::Space::space_collide", XS_ODE__Geom__Space_space_collide, file, "$$");
        newXSproto("ODE::Geom::Space::add", XS_ODE__Geom__Space_add, file, "$$");
        newXSproto("ODE::Geom::Space::remove", XS_ODE__Geom__Space_remove, file, "$$");
        newXSproto("ODE::Geom::Space::query", XS_ODE__Geom__Space_query, file, "$$");
        newXSproto("ODE::Geom::Space::geoms", XS_ODE__Geom__Space_geoms, file, "$");
        newXSproto("ODE::Geom::Space::Simple::_make", XS_ODE__Geom__Space__Simple__make, file, ";$");
        newXSproto("ODE::Geom::Space::Hash::_make", XS_ODE__Geom__Space__Hash__make, file, ";$");
        newXSproto("ODE::Geom::Space::Hash::levels", XS_ODE__Geom__Space__Hash_levels, file, "$;$$");
        newXSproto("ODE::Geom::Space::QuadTree::_make", XS_ODE__Geom__Space__QuadTree__make, file, "$$$$");
        newXSproto("ODE::Geom::Sphere::_make", XS_ODE__Geom__Sphere__make, file, "$$");
        newXSproto("ODE::Geom::Sphere::radius", XS_ODE__Geom__Sphere_radius, file, "$;$");
        newXSproto("ODE::Geom::Sphere::depth", XS_ODE__Geom__Sphere_depth, file, "$$");
        newXSproto("ODE::Geom::Box::_make", XS_ODE__Geom__Box__make, file, "$$");
        newXSproto("ODE::Geom::Box::sides", XS_ODE__Geom__Box_sides, file, "$;$");
        newXSproto("ODE::Geom::Box::depth", XS_ODE__Geom__Box_depth, file, "$$");
        newXSproto("ODE::Geom::Plane::_make", XS_ODE__Geom__Plane__make, file, "$$$");
        newXSproto("ODE::Geom::Plane::normal_param", XS_ODE__Geom__Plane_normal_param, file, "$;$$");
        newXSproto("ODE::Geom::Plane::depth", XS_ODE__Geom__Plane_depth, file, "$$");
        newXSproto("ODE::Geom::CappedCylinder::_make", XS_ODE__Geom__CappedCylinder__make, file, "$$$");
        newXSproto("ODE::Geom::CappedCylinder::params", XS_ODE__Geom__CappedCylinder_params, file, "$;$$");
        newXSproto("ODE::Geom::CappedCylinder::depth", XS_ODE__Geom__CappedCylinder_depth, file, "$$");
        newXSproto("ODE::Geom::Ray::_make", XS_ODE__Geom__Ray__make, file, "$$");
        newXSproto("ODE::Geom::Ray::length", XS_ODE__Geom__Ray_length, file, "$;$");
        newXSproto("ODE::Geom::Ray::orient", XS_ODE__Geom__Ray_orient, file, "$$$");
        newXSproto("ODE::Geom::Ray::orientation", XS_ODE__Geom__Ray_orientation, file, "$");
        newXSproto("ODE::Geom::Transform::_make", XS_ODE__Geom__Transform__make, file, "$");
        newXSproto("ODE::Geom::Transform::geom", XS_ODE__Geom__Transform_geom, file, "$;$");
        newXSproto("ODE::Vector::_make", XS_ODE__Vector__make, file, "$$$");
        newXSproto("ODE::Vector::clone", XS_ODE__Vector_clone, file, "$");
        newXSproto("ODE::Vector::list", XS_ODE__Vector_list, file, "$");
        newXSproto("ODE::Vector::x", XS_ODE__Vector_x, file, "$");
        newXSproto("ODE::Vector::y", XS_ODE__Vector_y, file, "$");
        newXSproto("ODE::Vector::z", XS_ODE__Vector_z, file, "$");
        newXSproto("ODE::Vector::sum", XS_ODE__Vector_sum, file, "$$;$");
        newXSproto("ODE::Vector::neg", XS_ODE__Vector_neg, file, "$");
        newXSproto("ODE::Vector::scale", XS_ODE__Vector_scale, file, "$$;$");
        newXSproto("ODE::Vector::dot", XS_ODE__Vector_dot, file, "$$;$");
        newXSproto("ODE::Vector::cross", XS_ODE__Vector_cross, file, "$$;$");
        newXSproto("ODE::Vector::norm", XS_ODE__Vector_norm, file, "$");
        newXSproto("ODE::Vector::unit", XS_ODE__Vector_unit, file, "$");
        newXSproto("ODE::Vector::equals", XS_ODE__Vector_equals, file, "$$;$");
        newXSproto("ODE::Quaternion::_make_identity", XS_ODE__Quaternion__make_identity, file, "");
        newXSproto("ODE::Quaternion::_make_angle_axis", XS_ODE__Quaternion__make_angle_axis, file, "$$");
        newXSproto("ODE::Quaternion::_make_direct", XS_ODE__Quaternion__make_direct, file, "$$$$");
        newXSproto("ODE::Quaternion::list", XS_ODE__Quaternion_list, file, "$");
        newXSproto("ODE::Quaternion::clone", XS_ODE__Quaternion_clone, file, "$");
        newXSproto("ODE::Quaternion::angle", XS_ODE__Quaternion_angle, file, "$");
        newXSproto("ODE::Quaternion::axis", XS_ODE__Quaternion_axis, file, "$");
        newXSproto("ODE::Quaternion::inverse", XS_ODE__Quaternion_inverse, file, "$");
        newXSproto("ODE::Quaternion::prod", XS_ODE__Quaternion_prod, file, "$$;$");
        newXSproto("ODE::Mass::_make", XS_ODE__Mass__make, file, "");
        newXSproto("ODE::Mass::mass", XS_ODE__Mass_mass, file, "$;$");
        newXSproto("ODE::Mass::center_of_gravity", XS_ODE__Mass_center_of_gravity, file, "$;$");
    XSRETURN_YES;
}

